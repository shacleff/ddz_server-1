window.__require=function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){return i(t[s][1][e]||e)},p,p.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({Game:[function(e,t,n){"use strict";cc._RF.push(t,"ba44e+eW5hEE7i9cAs7K1K2","Game");var o=e("../common/_init");cc.Class(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({extends:cc.Component,properties:{poker:{default:null,type:cc.Prefab},dipaiPanel:{default:null,type:cc.Node},pokerPanel:{default:null,type:cc.Node},faceNodes:{default:null,type:cc.Node},controlPanel:{default:null,type:cc.Node},handedOutPokerPanel:{default:null,type:cc.Node},pokerCard:{default:null,type:cc.Prefab},facePrefab:{default:null,type:cc.Prefab},clockPrefab:{default:null,type:cc.Prefab},passPrefb:{default:null,type:cc.Prefab},endDialog:{default:null,type:cc.Node},faces:{default:[],type:cc.Node},passNode:{default:null,type:cc.Node},prepareBtn:{default:null,type:cc.Node},callLandlord:{default:null,type:cc.Node},timerPanel:{default:null,type:cc.Node}},onLoad:function(){var e=this;cc.debug.setDisplayStats(!1),console.log("on load"),this.passNode=cc.find("Canvas/passTag"),this.passNode.addComponent("passTag"),this.faceNodes=cc.find("Canvas/faceNode"),this.faceNodes.addComponent("face_node"),this.handedOutPokerPanel=cc.find("Canvas/handedOutPokerPanel"),this.handedOutPokerPanel.addComponent("handedout_poker_panel"),this.callLandlord=cc.find("Canvas/callLandlord"),this.callLandlord.addComponent("call_landlord"),this.pokerPanel=cc.find("Canvas/pokerPanel"),this.pokerPanel.addComponent("poker_panel"),this.timerPanel=cc.find("Canvas/timerPanel"),this.timerPanel.addComponent("timer_panel"),o.Protocol.init(),o.EventDispatcher.listen(o.EventType.MSG_DDZ_ENTER_TABLE,this.onEnterTable,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_NEW_PLAYER,this.onPlayerEnterTable,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_DEAL_POKER,this._createHandPoker,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_PASS,this.onOtherPass,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_START,this.onStart,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_CALL_LANDLORD,this.onOtherCallLandlord,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_NO_CALL_LANDLORD,this.onOtherNoCallLandlord,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_ROB_LANDLORD,this.onOtherRobLandlord,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_NO_ROB_LANDLORD,this.onOtherNoRobLandlord,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_DISCARD,this.onOtherDiscard,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_PLAYER_PREPARED,this.onOtherPrepared,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_PLAYER_LEAVE,this.onOtherLeave,this),o.EventDispatcher.listen(o.EventType.MSG_DDZ_GAME_OVER,this.endGame,this),this.faceNodes.getComponent("face_node").createSelf("gaga"),this.createRight=function(t){e.faceNodes.getComponent("face_node").createRight(t)},this.createLeft=function(t){e.faceNodes.getComponent("face_node").createLeft(t)},g.player.team=0,this._setControlPanelVisible(this.status),this.call_and_rob=this.callLandlord.getComponent("call_landlord"),g.player.status=1,g.game=this},start:function(){},onDestroy:function(){console.log("destroy")},_updateDipai:function(e){},_setControlPanelVisible:function(e){this.controlPanel.getComponent("control_panel").setVisible(e)},_createDipai:function(e){if(void 0!==this.dipaiPanel.children)for(var t=0;t<this.dipaiPanel.children.length;t++)"poker"===this.dipaiPanel.children.name&&this.dipaiPanel.children[t].destroy();for(t=0;t<e.length;t++){var n=cc.instantiate(this.poker),o=n.getComponent("poker");o.initPoker(e[t],1),o.doDisable(),n.setPosition(cc.v2(30*t-30,0)),this.dipaiPanel.addChild(n)}},onPlayerEnterTable:function(e){console.log("new players"),g.getLeftPlayerSeatId(g.player.seatId)===e.seatId?this.createLeft(e):this.createRight(e)},onEnterTable:function(e){console.log("enter table"),this.createFace(e)},createFace:function(e){if(e.allPlayers)switch(console.log("\u83b7\u53d6\u5df2\u7ecf\u52a0\u5165\u7684\u73a9\u5bb6..."),e.allPlayers.length){case 0:console.log("case 0 \u83b7\u53d6\u5df2\u7ecf\u52a0\u5165\u7684\u73a9\u5bb6\uff0c\u81ea\u5df1\u7684\u5ea7\u4f4d\u53f70"),g.player.setSeatId(0),g.handedoutPokers={seatId:0,pokers:[]};break;case 1:g.player.setSeatId(1),g.handedoutPokers={seatId:1,pokers:[]},console.log("case 1 \u83b7\u53d6\u5df2\u7ecf\u52a0\u5165\u7684\u73a9\u5bb6\uff0c\u81ea\u5df1\u7684\u5ea7\u4f4d\u53f71"),this.createLeft(e.allPlayers[0]);break;case 2:g.player.setSeatId(2),g.handedoutPokers={seatId:2,pokers:[]},console.log("case 2 \u83b7\u53d6\u5df2\u7ecf\u52a0\u5165\u7684\u73a9\u5bb6\uff0c\u81ea\u5df1\u7684\u5ea7\u4f4d\u53f72"),this.createLeft(e.allPlayers[0]),this.createRight(e.allPlayers[1])}},onOtherLeave:function(e){switch(e.seatId){case 0:g.player.setSeatId(g.player.seatId-1);break;case 1:0===g.player.seatId||g.player.setSeatId(1)}},onOtherPrepared:function(e){},onStart:function(e){this.call_and_rob.hideAll();var t=this.pokerPanel.getComponent("poker_panel"),n=g.player.seatId,o=e.landlord;g.player.seatId===e.landlord?(this._setControlPanelVisible(!0),g.player.team=1,t.addPokers(this.dipai)):g.player.team=0;var i=cc.find("Canvas/faceNode").getComponent("face_node");i.changeSelf(o===n),console.log("\u81ea\u5df1\uff1a "+g.player.seatId+" \u5730\u4e3b\uff1a"+o+" \u5de6\uff1a"+g.getLeftPlayerSeatId(n)+" \u53f3\uff1a "+g.getRightPlayerSeatId(n)),i.changeRight(o===g.getRightPlayerSeatId(n)),i.changeLeft(o===g.getLeftPlayerSeatId(n)),this._createDipai(this.dipai)},onOtherCallLandlord:function(e){e.toshow===g.player.seatId&&this.call_and_rob.showRobBtn(),g.getLeftPlayerSeatId(g.player.seatId)===e.seatId?(this.call_and_rob.showOtherCall(1),console.log("\u5de6\u8fb9")):(this.call_and_rob.showOtherCall(0),console.log("\u53f3\u8fb9"))},onOtherNoCallLandlord:function(e){e.toshow===g.player.seatId&&this.call_and_rob.showRobBtn(),g.getLeftPlayerSeatId(g.player.seatId)===e.seatId?this.call_and_rob.showOtherNoCall(1):this.call_and_rob.showOtherNoCall(0)},onOtherRobLandlord:function(e){if(e.toshow===g.player.seatId&&this.call_and_rob.showRobBtn(),g.getLeftPlayerSeatId(g.player.seatId)===e.seatId){var t={cmd:"no_rob_landlord",playerId:g.player.id};g.player.sendMsg(o.EventType.MSG_DDZ_NO_ROB_LANDLORD,t),this.call_and_rob.showOtherRob(1)}else this.call_and_rob.showOtherRob(0)},onOtherNoRobLandlord:function(e){e.toshow===g.player.seatId&&this.call_and_rob.showRobBtn(),g.getLeftPlayerSeatId(g.player.seatId)===e.seatId?this.call_and_rob.showOtherNoRob(1):this.call_and_rob.showOtherNoRob(0)},onOtherDiscard:function(e){this._createHandedOutPoker(e);var t=cc.find("Canvas/passTag").getComponent("passTag");g.handedoutPokers={seatId:e.seatId,pokers:e.pokers},g.getLeftPlayerSeatId(g.player.seatId)===e.seatId?(t.hideLeftPass(),cc.find("Canvas/passTag").getComponent("passTag").hideSelfPass(),cc.find("Canvas/timerPanel").getComponent("timer_panel").hideLeftTimer()):(t.hideRightPass(),cc.find("Canvas/timerPanel").getComponent("timer_panel").showLeftTimer(),cc.find("Canvas/timerPanel").getComponent("timer_panel").hideRightTimer())},onOtherPass:function(e){var t=cc.find("Canvas/controlPanel").getComponent("control_panel"),n=cc.find("Canvas/passTag").getComponent("passTag");g.getLeftPlayerSeatId(g.player.seatId)===e.seatId?(console.log("\u5de6\u8fb9\u73a9\u5bb6\u4e0d\u8981"),n.hideSelfPass(),cc.find("Canvas/timerPanel").getComponent("timer_panel").hideLeftTimer(),cc.find("Canvas/passTag").getComponent("passTag").hideSelfPass(),n.showLeftPass(),t.setVisible(!0),console.log("\u5220\u9664\u8be5\u4e0d\u8981\u7684\u73a9\u5bb6\u51fa\u7684\u724c\uff0c\u5e76\u5de6\u8fb9\u663e\u793a\u4e0d\u8981")):(console.log("\u53f3\u8fb9\u73a9\u5bb6\u4e0d\u8981"),cc.find("Canvas/timerPanel").getComponent("timer_panel").showLeftTimer(),cc.find("Canvas/timerPanel").getComponent("timer_panel").hideRightTimer(),cc.find("Canvas/passTag").getComponent("passTag").hideLeftPass(),n.showRightPass(),console.log("\u5220\u9664\u8be5\u4e0d\u8981\u7684\u73a9\u5bb6\u51fa\u7684\u724c\uff0c\u5e76\u53f3\u8fb9\u663e\u793a\u4e0d\u8981"))},_testHandoutPoker:function(){},_createHandPoker:function(e){this._createDipai([-1,-1,-1]),console.log("\u5f00\u59cb\u53d1\u724c"),console.log(e),this.pokerPanel.getComponent("poker_panel")._createPokers(e.pokers),this.dipai=e.dipai,e.startP===g.player.seatId&&this.call_and_rob.showCallBtn()},_createHandedOutPoker:function(e){console.log("\u5ea7\u4f4d\u53f7 "+e.seatId+"\u5f97\u73a9\u5bb6\u51fa\u724c"),this.handedOutPokerPanel.getComponent("handedout_poker_panel")._createHandedOutPoker(e)},showPass:function(e){this.handedOutPokerPanel.getComponent("handedout_poker_panel")},zhunbei:function(){console.log("prepare clicked"),g.player.sendMsg(o.EventType.MSG_DDZ_PLAYER_PREPARED,{cmd:"prepare",playerId:g.player.id}),this.prepareBtn.active=!1},endGame:function(e){cc.find("Canvas/timerPanel").getComponent("timer_panel").hideAllTimer(),console.log(e);var t=this.endDialog.getComponent("end_dialog");e.team===g.player.team?(t.show(!0,!0),console.log("\u8d62\u4e86")):(console.log("\u8f93\u4e86"),t.show(!0,!1)),console.log("end game"),this.handedOutPokerPanel.getComponent("handedout_poker_panel").deleteAll(),cc.find("Canvas/passTag").getComponent("passTag").hidePasses(),g.handedoutPokers={seatId:g.player.seatId,pokers:[]},this.pokerPanel.getComponent("poker_panel")._deletePokers(),g.player.team=0,cc.find("Canvas/faceNode").getComponent("face_node").changeToDefault()}},"onDestroy",function(){o.EventDispatcher.ignore(o.EventType.MSG_DDZ_ENTER_TABLE,this.onEnterTable,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_NEW_PLAYER,this.onPlayerEnterTable,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_DEAL_POKER,this._createHandPoker,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_PASS,this.onOtherPass,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_START,this.onStart,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_CALL_LANDLORD,this.onOtherCallLandlord,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_NO_CALL_LANDLORD,this.onOtherNoCallLandlord,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_ROB_LANDLORD,this.onOtherRobLandlord,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_NO_ROB_LANDLORD,this.onOtherNoRobLandlord,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_DISCARD,this.onOtherDiscard,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_PLAYER_PREPARED,this.onOtherPrepared,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_PLAYER_LEAVE,this.onOtherLeave,this),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_GAME_OVER,this.endGame,this)})),cc._RF.pop()},{"../common/_init":"_init"}],HallMenu:[function(e,t,n){"use strict";cc._RF.push(t,"ffed3z6eblPtoYPi603si1L","HallMenu"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.settings=null,t}return __extends(t,e),t.prototype.init=function(){var e=this;cc.loader.loadRes("settings.prefab",function(t,n){t?cc.log("\u52a0\u8f7d\u8bbe\u7f6e\u9884\u8f7d\u8d44\u6e90\u51fa\u9519"):(e.settings=cc.instantiate(n),e.settings.setPosition(cc.v2(0,0)))})},t.prototype.onLoad=function(){},t.prototype.start=function(){},__decorate([r(cc.Node)],t.prototype,"settings",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],Home:[function(e,t,n){"use strict";cc._RF.push(t,"07c57qVYv9IJoh/pfvxAtcM","Home");var o=e("../common/_init");cc.Class({extends:cc.Component,properties:{facePrefab:{default:null,type:cc.Prefab},loadingAnimation:{default:null,type:cc.Animation},loadingMask:{default:null,type:cc.Node},nameLbl:{default:null,type:cc.Label},coinLbl:{default:null,type:cc.Label},settings:{default:null,type:cc.Node},mail:{default:null,type:cc.Node},playWay:{default:null,type:cc.Node},tableSelection:{default:null,type:cc.Node}},onLoad:function(){cc.debug.setDisplayStats(!1),this.loadingMask.active=!1,this.settings=cc.find("Canvas/settings"),this.mail=cc.find("Canvas/mail"),this.playWay=cc.find("Canvas/playWay"),this.tableSelection=cc.find("Canvas/Home/tableSelection"),this.loading=cc.find("Canvas/loading"),this.nameLbl.string=g.player.name||"jiangliu",this.coinLbl.string=g.player.coin||-9999,g.getLeftPlayerSeatId=function(e){return(e+2)%3},g.getRightPlayerSeatId=function(e){return(e+1)%3},console.log(g.player)},ctor:function(){},onDestroy:function(){console.log("onDestroy"),o.EventDispatcher.ignore(o.EventType.MSG_DDZ_CREATE_ROOM,this.onCreateRoom,this)},showEnterTable:function(){},showSettings:function(){this.settings.active=!0},hideSettings:function(){this.settings.active=!1},showMail:function(){this.mail.active=!0},hideMail:function(){this.mail.active=!1},showPlayWay:function(){this.playWay.active=!0},hidePlayWay:function(){this.playWay.active=!1},showTableSelection:function(){this.tableSelection.active=!0},hideTableSelection:function(){this.tableSelection.active=!1},enterTable:function(e){g.player.sendMsg(o.EventType.MSG_DDZ_ENTER_TABLE,{cmd:"join",tableId:e,playerId:g.player.id}),this.loading.active=!0,cc.director.loadScene("Game")},start:function(){}}),cc._RF.pop()},{"../common/_init":"_init"}],Login:[function(e,t,n){"use strict";cc._RF.push(t,"5bc89razX9L2aHEIMQBCNES","Login"),window.g={};var o=e("../common/player"),i=e("../common/_init");cc.Class({extends:cc.Component,properties:{username:{default:null,type:cc.EditBox},password:{default:null,type:cc.EditBox},loading:{default:null,type:cc.Node}},onLoad:function(){this.initSocket(),this.loading=cc.find("Canvas/loading")},initSocket:function(){var t=this;if(cc.sys.isNative)var n=SocketIO;else n=e("../common/socket.io");var r=n.connect("http://127.0.0.1:3001");r.on("yourid",function(e){var n=e.id;g.player=new o(r),g.player.id=n,g.player.register(i.EventType.RESP_DDZ_REGISTER,t.onRegistered,self),g.player.register(i.EventType.RESP_DDZ_LOGIN,t.onLogined,self)})},start:function(){var e=this;setTimeout(function(){e.username.string="test1",e.password.string="123"},100)},login:function(){var e=this,t=this.username.string,n=this.password.string;if(0!==t.length&&0!==n.length&&!(n.length>12)){var o={};o.username=t,o.password=n;var i=JSON.stringify(o),r=new XMLHttpRequest;r.open("POST","http://127.0.0.1:3001/users/login/",!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){200===r.status&&4===r.readyState&&e.onLogined(r.response)},r.send(i)}},onLogined:function(e){e=JSON.parse(e);if(console.log(e),e){var t=e.code;if(0===t){var n=e.user_info;g.player.initPlayerInfo(n),this.loading.active=!0,cc.director.loadScene("Home")}else console.error("error code "+t)}else console.log("login IS UNDEFINED")},register:function(){var e=this.username.string,t=this.password.string;if(0!==e.length&&0!==t.length&&!(t.length>12)){var n={cmd:"register",username:e,password:t,token:g.player.id,socketId:g.player.id};console.log(JSON.stringify(n)),g.player.sendMsg(i.EventType.MSG_DDZ_REGISTER,n)}},onRegistered:function(e){if(e){var t=e.error_code;if(0===t){var n=e.player_info;g.player.tables=e.tables,g.player.initPlayerInfo(n),cc.director.loadScene("Home")}else console.error("error code "+t)}else console.log("RESPONSE IS UNDEFINED")}}),cc._RF.pop()},{"../common/_init":"_init","../common/player":"player","../common/socket.io":"socket.io"}],_init:[function(e,t,n){"use strict";cc._RF.push(t,"2080eHx8udLBKCygqp26tY8","_init");t.exports={},cc._RF.pop()},{}],call_landlord:[function(e,t,n){"use strict";cc._RF.push(t,"83a7fUf+lFAN6BMlec7tDba","call_landlord");var o=e("../common/_init");cc.Class({extends:cc.Component,properties:{showPanel:{default:[],type:cc.Node},controlPanel:{default:[],type:cc.Node}},init:function(){console.log("call landlord init"),this.controlPanel[0]=cc.find("Canvas/callLandlord/controlPanel/callBtn"),this.controlPanel[1]=cc.find("Canvas/callLandlord/controlPanel/robBtn"),this.showPanel[0]=cc.find("Canvas/callLandlord/selfPanel"),this.showPanel[1]=cc.find("Canvas/callLandlord/rightPanel"),this.showPanel[2]=cc.find("Canvas/callLandlord/leftPanel")},showCallBtn:function(){this.controlPanel[0].active=!0},hideCallBtn:function(){this.controlPanel[0].active=!1},showRobBtn:function(){this.controlPanel[1].active=!0},hideRobBtn:function(){this.controlPanel[1].active=!1},onLoad:function(){this.init()},showNoCall:function(){this.showPanel[0].children[0].active=!0},hideNoCall:function(){this.showPanel[0].children[0].active=!1},showNoRob:function(){this.showPanel[0].children[1].active=!0},hideNoRob:function(){this.showPanel[0].children[1].active=!1},showCall:function(){this.showPanel[0].children[2].active=!0},hideCall:function(){this.showPanel[0].children[2].active=!1},showRob:function(){this.showPanel[0].children[3].active=!0},hideRob:function(){this.showPanel[0].children[3].active=!1},showOtherCall:function(e){e?this.showPanel[2].children[2].active=!0:this.showPanel[1].children[2].active=!0},hideOtherCall:function(){this.showPanel[2].children[2].active=!1,this.showPanel[1].children[2].active=!1},showOtherRob:function(e){e?this.showPanel[2].children[3].active=!0:this.showPanel[1].children[3].active=!0},hideOtherRob:function(){this.showPanel[2].children[3].active=!1,this.showPanel[1].children[3].active=!1},showOtherNoCall:function(e){e?this.showPanel[2].children[0].active=!0:this.showPanel[1].children[0].active=!0},hideOtherNoCall:function(){this.showPanel[2].children[0].active=!1,this.showPanel[1].children[0].active=!1},showOtherNoRob:function(e){e?this.showPanel[2].children[1].active=!0:this.showPanel[1].children[1].active=!0},hideOtherNoRob:function(){this.showPanel[2].children[1].active=!1,this.showPanel[1].children[1].active=!1},callLandlord:function(){var e={cmd:"call_landlord",playerId:g.player.id};g.player.sendMsg(o.EventType.MSG_DDZ_CALL_LANDLORD,e),this.hideCallBtn(),this.showCall()},noCallLandlord:function(){var e={cmd:"no_call_landlord",playerId:g.player.id};g.player.sendMsg(o.EventType.MSG_DDZ_NO_CALL_LANDLORD,e),this.hideCallBtn(),this.showNoCall()},robLandlord:function(){var e={cmd:"rob_landlord",playerId:g.player.id};g.player.sendMsg(o.EventType.MSG_DDZ_ROB_LANDLORD,e),this.hideRobBtn(),this.showRob()},noRobLandlord:function(){g.player.status=0;var e={cmd:"no_rob_landlord",playerId:g.player.id,status:g.player.status};g.player.sendMsg(o.EventType.MSG_DDZ_NO_ROB_LANDLORD,e),this.hideRobBtn(),this.showNoRob()},hideAll:function(){this.hideCall(),this.hideNoCall(),this.hideRob(),this.hideNoRob(),this.hideOtherCall(),this.hideOtherNoCall(),this.hideOtherRob(),this.hideOtherNoRob(),this.hideRobBtn(),this.hideCallBtn()},start:function(){}}),cc._RF.pop()},{"../common/_init":"_init"}],clock1:[function(e,t,n){"use strict";cc._RF.push(t,"870aeo8e8NF+ZCPmI6BlGo/","clock1"),cc.Class({extends:cc.Component,properties:{_countdown:0,countdownLbl:{default:null,type:cc.Label}},onLoad:function(){},startCountdown:function(e){this._countdown=e,this._doShow(),this._doSetCountdown(this._countdown),this.schedule(this._scheduleClock,1)},setVisible:function(e){e&&this.startCountdown(3),this.node.active=e},onEnable:function(){this.startCountdown(3)},onDisable:function(){this.stopCountdown()},_scheduleClock:function(){this._countdown--,this._countdown<0?this.stopCountdown():this._doSetCountdown(this._countdown)},_doShow:function(){this.node.active=!0},_doHide:function(){this.node.active=!1},_doSetCountdown:function(e){this.countdownLbl.string=e},stopCountdown:function(){this._doHide(),this.unschedule(this._scheduleClock)},start:function(){}}),cc._RF.pop()},{}],clock:[function(e,t,n){"use strict";cc._RF.push(t,"488bcGsDtRGTpoRw01RKZFr","clock"),cc.Class({extends:cc.Component,properties:{_countdown:0,countdownLbl:{default:null,type:cc.Label}},onLoad:function(){},startCountdown:function(e){this._countdown=e,this._doShow(),this._doSetCountdown(this._countdown),this.schedule(this._scheduleClock,1)},setVisible:function(e){e?(console.log("set true"),this._doShow(),this.startCountdown(3)):this._doHide()},_scheduleClock:function(){if(this._countdown--,this._countdown<0)if(console.log("\u5012\u8ba1\u65f6\u7ed3\u675f"),this.stopCountdown(),0===g.handedoutPokers.pokers.length||g.handedoutPokers.seatId===g.player.seatId){cc.find("Canvas/pokerPanel").getComponent("poker_panel").autoDiscard()}else{var e=cc.find("Canvas/controlPanel").getComponent("control_panel");setTimeout(function(){e.pass()},50)}else this._doSetCountdown(this._countdown)},_doShow:function(){this.node.active=!0},_doHide:function(){this.node.active=!1},_doSetCountdown:function(e){this.countdownLbl.string=e},stopCountdown:function(){this._doSetCountdown(0),this.unschedule(this._scheduleClock)},start:function(){}}),cc._RF.pop()},{}],config:[function(e,t,n){"use strict";cc._RF.push(t,"61ee1A6NOZBsbNsXSRpiXkP","config");var o={pokerCardType:{spade:"spade",heart:"heart",diamond:"diamond",club:"club"},jokerType:{JOKER:"G",joker:"g"},seatPos:{center:{pokerScale:.8,disBetween:40,positionY:-245},left:{pokerScale:.8,disBetween:40,positionY:150},right:{pokerScale:.8,disBetween:40,positionY:150},playedPoker:{pokerScale:.8,disBetween:40,positionY:50}}};t.exports=o,cc._RF.pop()},{}],control_panel:[function(e,t,n){"use strict";cc._RF.push(t,"40324o1Ok5MXLJCUS1hX9iJ","control_panel");e("../common/_init");var o=e("../poker/poker_handler");cc.Class({extends:cc.Component,properties:{pokerPanel:{default:null,type:cc.Node},handedOutPokerPanel:{default:null,type:cc.Node},clockPrefb:{default:null,type:cc.Prefab},clock:{default:null,type:cc.Node}},onLoad:function(){},setVisible:function(e){if(e){var t=cc.instantiate(this.clockPrefb);this.clock.addChild(t),t.setPosition(cc.v2(0,0)),t.getComponent("clock").startCountdown(5),this.handedOutPokerPanel.getComponent("handedout_poker_panel").hideSelf(),this.node.active=!0}else 0!==this.clock.children.length&&this.clock.children[0].destroy(),this.node.active=!1},discard:function(){for(var e=this.pokerPanel.getComponent("poker_panel"),t=e.getSelectedPokers(),n=(cc.find("Canvas/passTag").getComponent("passTag"),[]),i=0;i<t.length;i++)n.push(t[i].getComponent("poker").value);var r=(new o).getPokerWrapper(n);if(g.handedoutPokers.seatId===g.player.seatId){if(!r)return void console.log("\u6b64\u524d\u65e0\u4eba\u51fa\u724c\uff0c\u4e0d\u7b26\u5408\u89c4\u5219\uff0c\u4e0d\u53ef\u4ee5\u51fa\u724c");console.log("\u6b64\u524d\u65e0\u4eba\u51fa\u724c\u53ef\u4ee5\u51fa\u724c"),cc.find("Canvas/timerPanel").getComponent("timer_panel").showRightTimer(),e._onDiscard(t),this.setVisible(!1),this.showSelfHandeOutPoker(n)}else if(g.player.seatId===g.handedoutPokers.seatId){if(!r)return void console.log("\u522b\u4eba\u8981\u4e0d\u8d77\u4f60\u7684\u724c\uff0c\u4f46\u4f60\u51fa\u7684\u4e0d\u7b26\u5408\u89c4\u5219");console.log("\u522b\u4eba\u4e0d\u8d77\u4f60\u7684\u724c"),e._onDiscard(t),this.setVisible(!1),cc.find("Canvas/timerPanel").getComponent("timer_panel").showRightTimer(),this.showSelfHandeOutPoker(n)}else{if(!r.follow(g.handedoutPokers.pokers))return void console.log("\u7c7b\u578b\u4e0d\u5bf9\u6216\u8005\u5927\u5c0f\u4e0d\u5bf9\uff0c\u4e0d\u53ef\u4ee5\u8ddf\u724c");console.log("\u7c7b\u578b\u548c\u5927\u5c0f\u90fd\u7b26\u5408\uff0c\u53ef\u4ee5\u8ddf\u724c"),e._onDiscard(t),cc.find("Canvas/timerPanel").getComponent("timer_panel").showRightTimer(),this.setVisible(!1),this.showSelfHandeOutPoker(n)}},pass:function(){if(0===g.handedoutPokers.pokers.length)console.log("\u4f60\u662f\u7b2c\u4e00\u4e2a\u51fa\u724c\uff0c\u4e0d\u80fd\u4e0d\u8981");else if(g.handedoutPokers.seatId===g.player.seatId)console.log("\u522b\u4eba\u90fd\u4e0d\u8981\uff0c\u8be5\u4f60\u51fa\u724c\u4e86\uff0c\u4e0d\u80fd\u4e0d\u8981");else{this.pokerPanel.getComponent("poker_panel")._onPass(),console.log("\u4e0d\u8981");var e=cc.find("Canvas/passTag").getComponent("passTag");cc.find("Canvas/timerPanel").getComponent("timer_panel").showRightTimer(),e.showSelfPass(),this.setVisible(!1)}},showSelfHandeOutPoker:function(e){var t=this.handedOutPokerPanel.getComponent("handedout_poker_panel");t.showPokers(e,t.selfPanel)},start:function(){}}),cc._RF.pop()},{"../common/_init":"_init","../poker/poker_handler":"poker_handler"}],end_dialog:[function(e,t,n){"use strict";cc._RF.push(t,"b661aq2o3tBSpWMIlMxJUfO","end_dialog");var o=e("../common/_init");cc.Class({extends:cc.Component,properties:{win:{default:null,type:cc.Node},lose:{default:null,type:cc.Node},leaveBtn:{default:null,type:cc.Node},continueBtn:{default:null,type:cc.Node}},onLoad:function(){},continue:function(){g.player.sendMsg(o.EventType.MSG_DDZ_PLAYER_PREPARED,{cmd:"prepare",playerId:g.player.id}),this.setVisible(!1)},leave:function(){g.player.sendMsg(o.EventType.MSG_DDZ_PLAYER_LEAVE,{cmd:"leave",playerId:g.player.id}),g.player.setSeatId(-1),this.setVisible(!1),cc.director.loadScene("Home")},start:function(){},setVisible:function(e){this.node.active=e},setWinOrLose:function(e){e?(this.win.active=!0,this.lose.active=!1,console.log("show win")):(this.win.active=!1,this.lose.active=!0,console.log("show lose"))},show:function(e,t){this.setVisible(e),this.setWinOrLose(t)}}),cc._RF.pop()},{"../common/_init":"_init"}],event_type:[function(e,t,n){"use strict";cc._RF.push(t,"d0b39r8b+JBVpXPNpaw9OCN","event_type"),function(e){e.EventType={MSG_DDZ_NEW_PLAYER:"MSG_DDZ_NEW_PLAYER",MSG_DDZ_ENTER_TABLE:"MSG_DDZ_ENTER_TABLE",MSG_DDZ_ALL_PLAYERS:"MSG_DDZ_ALL_PLAYERS",MSG_DDZ_ALL_TABLES:"MSG_DDZ_ALL_TABLES",MSG_DDZ_PLAYER_PREPARED:"MSG_DDZ_PLAYER_PREPARED",MSG_DDZ_PLAYER_CONNECTED:"MSG_DDZ_PLAYER_CONNECTED",MSG_DDZ_CALL_LANDLORD:"MSG_DDZ_CALL_LANDLORD",MSG_DDZ_NO_CALL_LANDLORD:"MSG_DDZ_NO_CALL_LANDLORD",MSG_DDZ_ROB_LANDLORD:"MSG_DDZ_ROB_LANDLORD",MSG_DDZ_NO_ROB_LANDLORD:"MSG_DDZ_NO_ROB_LANDLORD",MSG_DDZ_DEAL_POKER:"MSG_DDZ_DEAL_POKER",MSG_DDZ_DISCARD:"MSG_DDZ_DISCARD",MSG_DDZ_PASS:"MSG_DDZ_PASS",MSG_DDZ_GAME_OVER:"MSG_DDZ_GAME_OVER",MSG_DDZ_PLAYER_LEAVE:"MSG_DDZ_PLAYER_LEAVE",MSG_DDZ_START_GAME:"MSG_DDZ_START_GAME",MSG_DDZ_START:"MSG_DDZ_START",MSG_DDZ_REGISTER:"MSG_DDZ_REGISTER",MSG_DDZ_LOGIN:"MSG_DDZ_LOGIN",RESP_DDZ_LOGIN:"RESP_DDZ_LOGIN",RESP_DDZ_REGISTER:"RESP_DDZ_REGISTER"}}(e("_init")),cc._RF.pop()},{_init:"_init"}],eventdispatcher:[function(e,t,n){(function(n){"use strict";cc._RF.push(t,"b5776JZcT5JDIHFty9AH3rY","eventdispatcher"),function(e){var t={_eventMap:{},listen:function(e,t,o){e?t?(console.log(n+"   "+e+" \u4e8b\u4ef6\u7ed1\u5b9a\u6210\u529f\uff01"),this._eventMap[e]=this._eventMap[e]||[],this._eventMap[e].push({handler:t,scope:o})):console.error("event handler is undefined!"):console.error("event name is undefined!")},trigger:function(e,t){if(!e)return console.log(e),void console.error("event name is undefined!");var n=this._eventMap[e];if(n)for(var o=0,i=n.length;o<i;o++){var r=n[o],s=r.handler;s&&s.call(r.scope,t)}else console.error("events is undefined! "+e)},ignore:function(e,t,n){var o=this._eventMap[e];if(o)for(var i=o.length-1;i>=0;i--){o[i].handler==t&&o.splice(i,1)}}};e.EventDispatcher=t}(e("_init")),cc._RF.pop()}).call(this,"/library\\imports\\b5\\b5776259-713e-490c-81c5-b72f401f7ad8.js")},{_init:"_init"}],face_node:[function(e,t,n){"use strict";cc._RF.push(t,"816c0Nh6EJFra46T1oY61ZN","face_node"),cc.Class({extends:cc.Component,properties:{faces:{default:[],type:cc.Node},faceControllerPref:{default:null,type:cc.Prefab}},createLeft:function(e){var t=cc.instantiate(this.faceControllerPref);t.getComponent("facecontroller").initFace(e.player,e.coin||999,2),this.faces[2].addChild(t),t.setPosition(cc.v2(0,0))},createRight:function(e){var t=cc.instantiate(this.faceControllerPref);t.getComponent("facecontroller").initFace(e.player,e.coin||999,2),this.faces[1].addChild(t),t.setPosition(cc.v2(0,0))},createSelf:function(e){var t=cc.instantiate(this.faceControllerPref);t.getComponent("facecontroller").initFace(g.player.name||"\u54c8\u54c8",g.player.coin,2),this.faces[0].addChild(t),t.setPosition(cc.v2(0,0))},_changeFace:function(e,t){e.children[0].getComponent("facecontroller").changeFace(t)},changeLeft:function(e){this._changeFace(this.faces[2],e)},changeRight:function(e){this._changeFace(this.faces[1],e)},changeSelf:function(e){this._changeFace(this.faces[0],e)},deleteLeftFace:function(){this.leftFaceNode.children[0].destroy()},deleteRightFace:function(){this.rightFaceNode.children[0].destroy()},changeToDefault:function(){this.faces[0].children[0].getComponent("facecontroller").initFace(),this.faces[1].children[0].getComponent("facecontroller").initFace(),this.faces[2].children[0].getComponent("facecontroller").initFace()},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],facecontroller:[function(e,t,n){"use strict";cc._RF.push(t,"8e1b91NnY9Ie5RE67Resxsk","facecontroller"),cc.Class({extends:cc.Component,properties:{FACE_MAP:{default:[],type:cc.SpriteFrame},nameLbl:{default:null,type:cc.Label},coinLbl:{default:null,type:cc.Label},faceSpr:{default:null,type:cc.Sprite}},onLoad:function(){},initFace:function(e,t,n){e&&(this.nameLbl.string=e),t&&(this.coinLbl.string=t+""),n&&(this.faceSpr.spriteFrame=this.FACE_MAP[n])},changeFace:function(e){e?(console.log(this.faceSpr.size+" landlord size"),console.log(this.faceSpr),this.faceSpr.spriteFrame=this.FACE_MAP[1]):(console.log(this.faceSpr),this.faceSpr.spriteFrame=this.FACE_MAP[0])},start:function(){}}),cc._RF.pop()},{}],handedout_poker_panel:[function(e,t,n){"use strict";cc._RF.push(t,"091625L2xJHBLQ/LxY78kcv","handedout_poker_panel"),cc.Class({extends:cc.Component,properties:{leftPanel:{default:null,type:cc.Node},rightPanel:{default:null,type:cc.Node},selfPanel:{default:null,type:cc.Node},poker:{default:null,type:cc.Prefab},clockPrefb:{default:null,type:cc.Prefab},passPrefb:{default:null,type:cc.Prefab}},ctor:function(){this._M=24,this._W=70,this._H=92},onLoad:function(){},_createHandedOutPoker:function(e){console.log(e);var t=cc.find("Canvas/controlPanel").getComponent("control_panel");switch(e.seatId){case 0:1===g.player.seatId?(console.log("\u5de6\u8fb9\u73a9\u5bb6\u51fa\u724c"),t.setVisible(!0),this.showPokers(e.pokers,this.leftPanel)):(this.hideLeft(),console.log("\u53f3\u8fb9\u73a9\u5bb6\u51fa\u724c"),this.showPokers(e.pokers,this.rightPanel));break;case 1:0===g.player.seatId?(console.log("\u53f3\u8fb9\u73a9\u5bb6\u51fa\u724c"),this.hideLeft(),this.showPokers(e.pokers,this.rightPanel)):(console.log("\u5de6\u8fb9\u73a9\u5bb6\u51fa\u724c"),t.setVisible(!0),this.showPokers(e.pokers,this.leftPanel));break;case 2:0===g.player.seatId?(console.log("\u5de6\u8fb9\u73a9\u5bb6\u51fa\u724c"),t.setVisible(!0),this.showPokers(e.pokers,this.leftPanel)):(console.log("\u53f3\u8fb9\u73a9\u5bb6\u51fa\u724c"),this.hideLeft(),this.showPokers(e.pokers,this.rightPanel))}},showPokers:function(e,t){this.hide(t);for(var n=e.length,o=-((n-1)*this._M+this._W)/2,i=0;i<n;i++){var r=cc.instantiate(this.poker);r.getComponent("poker").initPoker(e[i]),t.addChild(r),r.setScale(.5),r.setPosition(cc.v2(o+i*this._M,0))}},hide:function(e){if(void 0!==e.children&&0!==e.children.length)for(var t=e.children,n=0,o=t.length;n<o;n++)"poker"===t[n]._name&&t[n].destroy()},hideRight:function(){this.hide(this.rightPanel)},hideLeft:function(){this.hide(this.leftPanel)},hideSelf:function(){this.hide(this.selfPanel)},deleteAll:function(){for(var e=[this.rightPanel,this.selfPanel,this.leftPanel],t=0;t<3;t++)if(void 0!==e[t].children&&0!==e[t].children.length)for(var n=e[t].children,o=(t=0,n.length);t<o;t++)"poker"===n[t]._name&&n[t].destroy()},start:function(){}}),cc._RF.pop()},{}],mail:[function(e,t,n){"use strict";cc._RF.push(t,"e7da6mJSoRA5406/90LQsxZ","mail"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){return new Promise(function(e){e()})},t.prototype.onEnable=function(){this.init().then(function(){console.log("haha")})},t.prototype.onLoad=function(){},t.prototype.start=function(){},t=__decorate([i],t)}(cc.Component));n.default=r,cc._RF.pop()},{}],passTag:[function(e,t,n){"use strict";cc._RF.push(t,"359316j5yNMfZPpKZZxsmsd","passTag"),cc.Class({extends:cc.Component,properties:{panel:{default:[],type:cc.Node}},onLoad:function(){this.panel[0]=cc.find("Canvas/passTag/selfPanel"),this.panel[1]=cc.find("Canvas/passTag/rightPanel"),this.panel[2]=cc.find("Canvas/passTag/leftPanel")},showSelfPass:function(){this.panel[0].children[0].active=!0},showRightPass:function(){this.panel[1].children[0].active=!0},showLeftPass:function(){this.panel[2].children[0].active=!0},hideSelfPass:function(){this.panel[0].children[0].active=!1},hideRightPass:function(){this.panel[1].children[0].active=!1},hideLeftPass:function(){this.panel[2].children[0].active=!1},hidePasses:function(){this.hideSelfPass(),this.hideRightPass(),this.hideLeftPass()}}),cc._RF.pop()},{}],player:[function(e,t,n){"use strict";cc._RF.push(t,"c8771ea4exIDo7catR2J6xO","player");var o=e("./_init");function i(e){this.socket=e,this.id=this.socket.id,this.accountId=i.ID,i.ID++,this.status=-1,this.seatId=null,this.coin=1e4*Math.random(),this.gender=3}i.prototype={initPlayerInfo:function(e){this.name=e.username,this.nickName=e.nickname,this.gender=e.gender,this.coin=e.coin},sendMsg:function(e,t,n){console.log(),this.socket.emit(e,t,n)},joinTable:function(e){this.socket.join(e)},register:function(e,t,n){this.socket.on(e,function(e){t&&t.call(n,e)})},setSeatId:function(e){this.seatId=e},connected:function(e){o.EventDispatcher.trigger(o.EventType.MSG_DDZ_ALL_TABLES,e)}},i.GENDER={MALE:1,FEMALE:2,SECRET:3},t.exports=i,cc._RF.pop()},{"./_init":"_init"}],poker_handler:[function(e,t,n){"use strict";cc._RF.push(t,"17f61EXT95LQbEJ7Kr3oivh","poker_handler");var o=e("./poker_type_handler"),i=e("../common/util");function r(){this.size()}function s(e){this.size=e.length,this.srcPoker=e,this.headValue,this.pokerType}function a(){}r.prototype.size=function(){var e=0;for(var t in this)"size"!=t&&e++;return e},s.prototype.follow=function(e){if("wangzha"==this.pokerType)return!0;var t=(new a).getPokerWrapper(e);return this.pokerType===t.pokerType&&this.size===t.size&&parseInt(this.headValue)>parseInt(t.headValue)},a.prototype.getPokerWrapper=function(e){if(e.sort(i.gradeUp),!e||0==e.length)throw"wrong poker length";var t=new s(e);if(console.log("\u5224\u65ad\u724c\u578b"),console.log(e),console.log(e[0]>>4),console.log(e[1]>>4),2==e.length&&e[0]>>4==5&&e[1]>>4==4)return t.headValue="g",t.pokerType="wangzha",t;for(var n=new r,a=0;a<e.length;a++){var c=e[a],l=n[15&c];l||(l=0),n[15&c]=++l}var p=[];for(var h in n)"size"!=h&&p.push(n[h]);p.sort(function(e,t){return t-e});for(var u="",d=0;d<p.length;d++){var f=p[d];if(f>4)throw"wrong poker type";u+=f+""}console.log(u),u=(u=(u=(u=u.replace(/1/g,"a")).replace(/2/g,"b")).replace(/3/g,"c")).replace(/4/g,"d");var g=/a+/g.exec(u);g&&g[0].length===u.length&&u.length>5&&(u="aaaaa");var y=/b+/g.exec(u);y&&y[0].length===u.length&&u.length>3&&(u="bbb"),console.log("type:"+u),t.pokerType=i.pokerType[u];var _=new o;try{return _[i.pokerType[u]](n,t)}catch(e){console.log(e)}},t.exports=a,cc._RF.pop()},{"../common/util":"util","./poker_type_handler":"poker_type_handler"}],poker_panel:[function(e,t,n){"use strict";cc._RF.push(t,"da752JLSgVKu5lnj2xLcXRE","poker_panel");var o=e("../common/_init");cc.Class({extends:cc.Component,properties:{_MARGIN:48,_WIDTH:140,_HEIGHT:184,poker:{default:null,type:cc.Prefab},altas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this.pokers=[];var e=this,t=this.node;this._startPos=0,g.pN=this,t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart),t.on(cc.Node.EventType.TOUCH_END,function(t){e.onTouchEnd(t)})},onTouchStart:function(e){var t=e.getLocation(),n=e.getCurrentTarget().convertToNodeSpace(t);this._startPos=n,console.log("TOUCH_START localPos.x: "+n.x+",localPos.y: "+n.y)},onTouchEnd:function(e){var t=e.getLocation(),n=e.getCurrentTarget(),o=n.convertToNodeSpace(t);console.log(this),console.log("TOUCH_END endPos.x: "+o.x+",endPos.y: "+o.y),n.getComponent("pokerPanel")._calcTouchedPokers(this._startPos,o)},getSelectedPokers:function(){var e=this.pokers.length;if(0===e)return[];for(var t=[],n=0;n<e;n++){var o=this.pokers[n];o.getComponent("poker").selected&&t.push(o)}return t},_calcPokerArea:function(){return(this.pokers.length-1)*this._MARGIN+this._WIDTH},_calcTouchedPokers:function(e,t){var n=this._calcPokerArea(),o=-n;if(e>n&&t>n||e<o&&t<o)return[];var i=Math.max(e,t),r=Math.min(e,t),s=Math.min(i,n),a=Math.max(r,o),c=Math.floor((a-o)/this._MARGIN),l=Math.floor((s-o)/this._MARGIN);console.log("leftIndex:"+c+" rightIndex:"+l)},start:function(){},_onDiscard:function(e){for(var t=[],n=cc.find("Canvas/handedOutPokerPanel").getComponent("handedout_poker_panel"),i=0,r=e.length;i<r;i++)for(var s=0;s<this.pokers.length;s++)e[i]._id===this.pokers[s]._id&&(t.push(this.pokers[s]),this.pokers.splice(s,1));var a=[];for(i=0;i<t.length;i++)a.push(t[i].getComponent("poker").value),t[i].destroy();var c={cmd:"discard",playerId:g.player.id,pokers:a};(g.handedoutPokers={seatId:g.player.seatId,pokers:a},0===this.pokers.length)?(g.player.sendMsg(o.EventType.MSG_DDZ_GAME_OVER,{cmd:"gameover",playerId:g.player.id}),(n=cc.find("Canvas/handedOutPokerPanel").getComponent("handedout_poker_panel")).deleteAll(),cc.find("Canvas/controlPanel").getComponent("control_panel").setVisible(!1),cc.find("Canvas/passTag").getComponent("passTag").hidePasses(),cc.find("Canvas/pokerPanel").getComponent("poker_panel")._deletePokers(),cc.find("Canvas/endDialog").getComponent("end_dialog").show(!0,!0),g.player.team=0):(g.player.sendMsg(o.EventType.MSG_DDZ_DISCARD,c),n.hideRight(),this._neatenPokers(this.pokers))},autoDiscard:function(){var e=[],t=cc.find("Canvas/handedOutPokerPanel").getComponent("handedout_poker_panel");cc.find("Canvas/controlPanel").getComponent("control_panel").setVisible(!1),e.push(this.pokers[this.pokers.length-1]),this.pokers.splice(this.pokers.length-1,1);for(var n=[],i=0;i<e.length;i++)n.push(e[i].getComponent("poker").value),e[i].destroy();cc.find("Canvas/controlPanel").getComponent("control_panel").showSelfHandeOutPoker(n);var r={cmd:"discard",playerId:g.player.id,pokers:n};(g.handedoutPokers={seatId:g.player.seatId,pokers:n},0===this.pokers.length)?(g.player.sendMsg(o.EventType.MSG_DDZ_GAME_OVER,{cmd:"gameover",playerId:g.player.id}),(t=cc.find("Canvas/handedOutPokerPanel").getComponent("handedout_poker_panel")).deleteAll(),cc.find("Canvas/controlPanel").getComponent("control_panel").setVisible(!1),cc.find("Canvas/passTag").getComponent("passTag").hidePasses(),cc.find("Canvas/pokerPanel").getComponent("poker_panel")._deletePokers(),cc.find("Canvas/endDialog").getComponent("end_dialog").show(!0,!0),g.player.team=0):(g.player.sendMsg(o.EventType.MSG_DDZ_DISCARD,r),t.hideRight(),this._neatenPokers(this.pokers))},_onPass:function(){g.player.sendMsg(o.EventType.MSG_DDZ_PASS,{cmd:"pass",playerId:g.player.id})},_createPokers:function(e){for(var t=e.length,n=-((t-1)*this._MARGIN+this._WIDTH)/2,o=0;o<t;o++){var i=cc.instantiate(this.poker);i.getComponent("poker").initPoker(e[o]),i._name=e[o]+"",i.setPosition(cc.v2(n+o*this._MARGIN,0)),this.node.addChild(i),this.pokers.push(i)}},addPokers:function(e){for(var t=0,n=e.length;t<n;t++){var o=cc.instantiate(this.poker);o.getComponent("poker").initPoker(e[t]),o._name=e[t]+"",o.setPosition(cc.v2(0,0)),this.node.addChild(o),this.pokers.push(o)}this._neatenPokers(this.pokers)},_neatenPokers:function(e){for(var t=-((e.length-1)*this._MARGIN+this._WIDTH)/2,n=0;n<e.length;n++)e[n].setPosition(cc.v2(t+n*this._MARGIN,0))},_deletePokers:function(){if(console.log("\u7ed3\u675f\u5220\u9664\u6240\u6709\u6251\u514b"),this.pokers=[],void 0!==this.node.children&&0!==this.node.children.length)for(var e=this.node.children,t=0,n=e.length;t<n;t++)e[t].destroy()}});var i=void 0;(function(e){e.bind=function(t){e.pokerPanel=t},e.discard=function(t){e.pokerPanel.discard(t)},e.discard1=function(e){e!==undfined&&null!==e||(e={cmd:"discard",pokers:[19,19]}),EventDispatcher.trigger("\u8fd9\u91cc\u662f\u51fa\u724c\u65f6\u95f4\u5bf9\u5e94\u7684\u4e8b\u4ef6\u7c7b\u578b",e)}})(i||(i={})),cc._RF.pop()},{"../common/_init":"_init"}],poker_type_handler:[function(e,t,n){"use strict";cc._RF.push(t,"55293g8o8JIwYA1mO901eWA","poker_type_handler");var o=e("../common/util");function i(){}i.prototype.dan=function(e,t){for(var n in console.log("\u5355\u5f20"),e)"size"!=n&&(t.headValue=n);return t},i.prototype.dui=function(e,t){console.log("\u4e00\u5bf9");var n=[];for(var o in e)"size"!=o&&n.push(o);return t.headValue=n[0],t},i.prototype.san=function(e,t){console.log("\u4e09\u4e2a");var n=[];for(var o in e)"size"!=o&&n.push(o);for(var i in e)if(3==e[i]){t.headValue=i;break}return t},i.prototype.shunzi=function(e,t){console.log("\u987a\u5b50");var n=[];for(var i in e)"size"!=i&&n.push(i);if(console.log(n),parseInt(n[n.length-1])<12){if(o.isRightOrder(n))return t.headValue=n[0],t;throw console.log("\u4e0d\u662f\u7b49\u5dee\u6570\u5217"),o.EXCEPTION.WRONG_POKER_TYPE}throw o.EXCEPTION.WRONG_POKER_TYPE},i.prototype.liandui=function(e,t){console.log("\u8fde\u5bf9");var n=[];for(var i in e)"size"!=i&&n.push(i);if(console.log(n),parseInt(n[n.length-1])<12){if(o.isRightOrder(n))return t.headValue=n[0],t;throw console.log("\u4e0d\u662f\u7b49\u5dee\u6570\u5217"),o.EXCEPTION.WRONG_POKER_TYPE}throw o.EXCEPTION.WRONG_POKER_TYPE},i.prototype.feiji=function(e,t){console.log("\u98de\u673a");var n=[];for(var i in e)"size"!=i&&3==e[i]&&n.push(i);if(parseInt(n[n.length-1])<12){if(o.isRightOrder(n))return t.headValue=n[0],t;throw console.log("\u4e0d\u662f\u7b49\u5dee\u6570\u5217"),o.EXCEPTION.WRONG_POKER_TYPE}throw console.log("\u987a\u5b50\u6700\u5927D\u662f\u6570\u5b57\u5e94\u8be5\u5c0f\u4e8e2"),o.EXCEPTION.WRONG_POKER_TYPE},i.prototype.zhadan=function(e,t){console.log("\u70b8\u5f39");var n=[];for(var o in e)"size"!=o&&n.push(o);return t.headValue=n[0],t},i.prototype.sandaiyi=function(e,t){console.log("\u4e09\u5e26\u4e00");var n=[];for(var o in e)"size"!=o&&n.push(o);for(var i in e)if(3==e[i]){t.headValue=i;break}return t},i.prototype.si=function(e,t){var n=[];for(var o in console.log("\u56db\u5e26\u4e00"),e)"size"!=o&&n.push(o);for(var i in e)if(4==e[i]){t.headValue=i;break}return t},t.exports=i,cc._RF.pop()},{"../common/util":"util"}],poker:[function(e,t,n){"use strict";cc._RF.push(t,"a9c9aQn8JRDpI7vnHTDuHGq","poker"),cc.Class({extends:cc.Component,properties:{_clickEnable:!0,backSpr:{default:null,type:cc.Sprite},frontNode:{default:null,type:cc.Node},frontSpr:{default:null,type:cc.Sprite},pointSpr:{default:null,type:cc.Sprite},smallFlowerSpr:{default:null,type:cc.Sprite},bigFlowerSpr:{default:null,type:cc.Sprite},tagSpr:{default:null,type:cc.Sprite},altas:{default:null,type:cc.SpriteAtlas},value:null,selected:!1},ctor:function(){this._jokerMap={0:3,1:4,2:5,3:6,4:7,5:8,6:9,7:10,8:"J",9:"Q",10:"K",11:"A",12:2,13:"litterJoker",14:"bigJoker"},this._pointPath=["3","4","5","6","7","8","9","10","J","Q","K","A","2","litterJoker","bigJoker"],this._typePath=["black","red","red","black"],this._flowerPath=["images-poker-Card_hearts_black_1","images-poker-Card_hearts_red_1","images-poker-Card_Square-piece_red_1","images-poker-Card_Flower_black_1","images-poker-Card_clown_gray","images-poker-Card_clown_red"],this._altas=null},getType:function(e){return e>>4},getPoint:function(e){return 15&e},flip:function(e){this._flip(e)},_flip:function(e){this.frontNode.active=e,this.backSpr.active=!e},initPoker:function(e,t){if(1===t&&(this.node.scale=.6),-1!==e){this.flip(!0),this.value=e+"";var n=this.getType(this.value);if(this._isJoker(n))if(4===n){var o="images-poker-Card_JOKER_black",i=this.altas.getSpriteFrame(o);this.pointSpr.spriteFrame=i,this.pointSpr.node.setPosition(cc.v2(-52,30));var r=this.altas.getSpriteFrame("images-poker-Card_clown_gray");this.bigFlowerSpr.spriteFrame=r,this.smallFlowerSpr.spriteFrame=null}else{o="images-poker-Card_JOKER_red",i=this.altas.getSpriteFrame(o);this.pointSpr.spriteFrame=i,this.pointSpr.node.setPosition(cc.v2(-52,30));r=this.altas.getSpriteFrame("images-poker-Card_clown_red");this.bigFlowerSpr.spriteFrame=r,this.smallFlowerSpr.spriteFrame=null}else{var s=this.getPoint(e);o="images-poker-Card_"+this._jokerMap[s]+"_"+this._typePath[n],i=this.altas.getSpriteFrame(o);this.pointSpr.spriteFrame=i;var a=this._flowerPath[n];r=this.altas.getSpriteFrame(a);this.smallFlowerSpr.spriteFrame=r,this.smallFlowerSpr.scale=.4,this.bigFlowerSpr.spriteFrame=r}}else this.flip(!1)},doDisable:function(){this._clickEnable=!1},_isJoker:function(e){return e>3},selectPoker:function(){this._clickEnable&&(this.selected?(this.selected=!1,this.node.y-=15):(this.selected=!0,this.node.y+=15))},onLoad:function(){this.tagSpr.enabled=!1},start:function(){}}),cc._RF.pop()},{}],prepare:[function(e,t,n){"use strict";cc._RF.push(t,"1f480bV6sdON5Doe27nLH1l","prepare");var o=e("../common/_init");cc.Class({extends:cc.Component,properties:{prepareBtn:{default:null,type:cc.Node}},setVisible:function(e){this.prepareBtn.active=e},zhunbei:function(){console.log("prepare clicked"),g.player.sendMsg(o.EventType.MSG_DDZ_PLAYER_PREPARED,{cmd:"prepare",playerId:g.player.id}),this.setVisible(!1)},onLoad:function(){},start:function(){}}),cc._RF.pop()},{"../common/_init":"_init"}],protocol:[function(e,t,n){"use strict";cc._RF.push(t,"21c817mIMtOzpEoLtdb6tsv","protocol"),function(e){var t={init:function(){this._onEnterTable(),this._onPlayerEnterTable(),this._onDealPoker(),this._onDiscard(),this._onPass(),this._onAllPlayers(),this._onPlayerLeave(),this._onEndGame(),this._onCallLandlord(),this._onNoCallLandlord(),this._onRobLandlord(),this._onNoRobLandlord(),this._onStart()},_onCreateRoom:function(){g.player.register("create room",function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_CREATE_ROOM,t)})},_onAllPlayers:function(){g.player.register(e.EventType.MSG_DDZ_ALL_PLAYERS,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_ALL_PLAYERS,t)})},_onEnterTable:function(){g.player.register(e.EventType.MSG_DDZ_ENTER_TABLE,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_ENTER_TABLE,t)})},_onPlayerEnterTable:function(){g.player.register(e.EventType.MSG_DDZ_NEW_PLAYER,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_NEW_PLAYER,t)})},_onStart:function(){g.player.register(e.EventType.MSG_DDZ_START,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_START,t)})},_onCallLandlord:function(){g.player.register(e.EventType.MSG_DDZ_CALL_LANDLORD,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_CALL_LANDLORD,t)})},_onNoCallLandlord:function(){g.player.register(e.EventType.MSG_DDZ_NO_CALL_LANDLORD,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_NO_CALL_LANDLORD,t)})},_onRobLandlord:function(){g.player.register(e.EventType.MSG_DDZ_ROB_LANDLORD,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_NO_ROB_LANDLORD,t)})},_onNoRobLandlord:function(){g.player.register(e.EventType.MSG_DDZ_ENTER_TABLE,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_ENTER_TABLE,t)})},_onDealPoker:function(){g.player.register(e.EventType.MSG_DDZ_DEAL_POKER,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_DEAL_POKER,t)})},_onDiscard:function(){g.player.register(e.EventType.MSG_DDZ_DISCARD,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_DISCARD,t)})},_onPass:function(){g.player.register(e.EventType.MSG_DDZ_PASS,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_PASS,t)})},_onEndGame:function(){g.player.register(e.EventType.MSG_DDZ_GAME_OVER,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_GAME_OVER,t)})},_onPlayerLeave:function(){g.player.register(e.EventType.MSG_DDZ_PLAYER_LEAVE,function(t){e.EventDispatcher.trigger(e.EventType.MSG_DDZ_PLAYER_LEAVE,t)})},_onTest:function(){g.player.register("test",function(e){console.log(e),g.player.emit("test",e)})},register:function(e,t){this.cmdMap[e]=t},_onRecived:function(e){JSON.parse(e);var t=jons.cmd;(0,this.cmdMap[t])(e)}};e.Protocol=t}(e("_init")),cc._RF.pop()},{_init:"_init"}],settings:[function(e,t,n){"use strict";cc._RF.push(t,"efe3cq+XiNMyLAo4/yCyiOr","settings"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicSwitch=null,t.soundSwitch=null,t}return __extends(t,e),t.prototype.init=function(){var e=this;return new Promise(function(t){e.musicSwitch=cc.find("Canvas/settings/music/switch"),e.soundSwitch=cc.find("Canvas/settings/sound/switch"),t()})},t.prototype.switchMusic=function(){this.musicSwitch.getComponent(cc.Toggle).isChecked?cc.log("\u6253\u5f00\u97f3\u4e50"):cc.log("\u5173\u95ed\u97f3\u4e50")},t.prototype.switchSound=function(){this.soundSwitch.getComponent(cc.Toggle).isChecked?cc.log("\u6253\u5f00\u97f3\u6548"):cc.log("\u5173\u95ed\u97f3\u6548")},t.prototype.onLoad=function(){var e=this;this.init().then(function(){e.musicSwitch.getComponent(cc.Toggle).node.on("toggle",e.switchMusic,e),e.soundSwitch.getComponent(cc.Toggle).node.on("toggle",e.switchSound,e)})},t.prototype.start=function(){},__decorate([r(cc.Node)],t.prototype,"musicSwitch",void 0),__decorate([r(cc.Node)],t.prototype,"soundSwitch",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],"socket.io":[function(e,t,n){(function(o){"use strict";cc._RF.push(t,"73a24XqNK5JvpCXD39300k3","socket.io");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.sys.isNative||function(e){if("object"===(void 0===n?"undefined":i(n))&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this).player=e()}}(function(){return function t(n,o,i){function r(a,c){if(!o[a]){if(!n[a]){var l="function"==typeof e&&e;if(!c&&l)return l(a,!0);if(s)return s(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var h=o[a]={exports:{}};n[a][0].call(h.exports,function(e){var t=n[a][1][e];return r(t||e)},h,h.exports,t,n,o,i)}return o[a].exports}for(var s="function"==typeof e&&e,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){var o=e("./url"),r=e("socket.io-parser"),s=e("./manager"),a=e("debug")("socket.io-client");t.exports=n=l;var c=n.managers={};function l(e,t){"object"==(void 0===e?"undefined":i(e))&&(t=e,e=void 0),t=t||{};var n,r=o(e),l=r.source,p=r.id,h=r.path,u=c[p]&&h in c[p].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(a("ignoring socket cache for %s",l),n=s(l,t)):(c[p]||(a("new io instance for %s",l),c[p]=s(l,t)),n=c[p]),n.socket(r.path)}n.protocol=r.protocol,n.connect=l,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":2,"./socket":4,"./url":5,debug:14,"socket.io-parser":40}],2:[function(e,t,n){var o=e("engine.io-client"),r=e("./socket"),s=e("component-emitter"),a=e("socket.io-parser"),c=e("./on"),l=e("component-bind"),p=e("debug")("socket.io-client:manager"),h=e("indexof"),u=e("backo2"),d=Object.prototype.hasOwnProperty;function f(e,t){if(!(this instanceof f))return new f(e,t);e&&"object"==(void 0===e?"undefined":i(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new u({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=f,f.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},f.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},s(f.prototype),f.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},f.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},f.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(e){if(p("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;p("opening %s",this.uri),this.engine=o(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=c(t,"open",function(){n.onopen(),e&&e()}),r=c(t,"error",function(t){if(p("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var o=new Error("Connection error");o.data=t,e(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;p("connect attempt will timeout after %d",s);var a=setTimeout(function(){p("connect attempt timed out after %d",s),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(r),this},f.prototype.onopen=function(){p("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",l(this,"ondata"))),this.subs.push(c(e,"ping",l(this,"onping"))),this.subs.push(c(e,"pong",l(this,"onpong"))),this.subs.push(c(e,"error",l(this,"onerror"))),this.subs.push(c(e,"close",l(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(e){this.decoder.add(e)},f.prototype.ondecoded=function(e){this.emit("packet",e)},f.prototype.onerror=function(e){p("error",e),this.emitAll("error",e)},f.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new r(this,e),this.nsps[e]=t;var n=this;t.on("connecting",o),t.on("connect",function(){t.id=n.engine.id}),this.autoConnect&&o()}function o(){~h(n.connecting,t)||n.connecting.push(t)}return t},f.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},f.prototype.packet=function(e){p("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var o=0;o<n.length;o++)t.engine.write(n[o],e.options);t.encoding=!1,t.processPacketQueue()}))},f.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},f.prototype.cleanup=function(){var e;for(p("cleanup");e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){p("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(e){p("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)p("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();p("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(p("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(p("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(p("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},f.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":3,"./socket":4,backo2:8,"component-bind":11,"component-emitter":12,debug:14,"engine.io-client":16,indexof:32,"socket.io-parser":40}],3:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],4:[function(e,t,n){var o=e("socket.io-parser"),i=e("component-emitter"),r=e("to-array"),s=e("./on"),a=e("component-bind"),c=e("debug")("socket.io-client:socket"),l=e("has-binary");t.exports=u;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function u(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}i(u.prototype),u.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},u.prototype.open=u.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},u.prototype.send=function(){var e=r(arguments);return e.unshift("message"),this.emit.apply(this,e),this},u.prototype.emit=function(e){if(p.hasOwnProperty(e))return h.apply(this,arguments),this;var t=r(arguments),n=o.EVENT;l(t)&&(n=o.BINARY_EVENT);var i={type:n,data:t,options:{}};return i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},u.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},u.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},u.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},u.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},u.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},u.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=r(arguments);c("sending ack %j",i);var s=l(i)?o.BINARY_ACK:o.ACK;t.packet({type:s,id:e,data:i})}}},u.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},u.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},u.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},u.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},u.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},u.prototype.close=u.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},u.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":3,"component-bind":11,"component-emitter":12,debug:14,"has-binary":30,"socket.io-parser":40,"to-array":43}],5:[function(e,t,n){(function(n){var o=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var r=e,t=t||n.location;null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),r=o(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(t&&t.port==r.port?"":":"+r.port),r}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{debug:14,parseuri:38}],6:[function(e,t,n){function o(){}t.exports=function(e,t,n){var i=!1;return n=n||o,r.count=e,0===e?t():r;function r(e,o){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(i=!0,t(e),t=n):0!==r.count||i||t(null,o)}}},{}],7:[function(e,t,n){t.exports=function(e,t,n){var o=e.byteLength;if(t=t||0,n=n||o,e.slice)return e.slice(t,n);if(t<0&&(t+=o),n<0&&(n+=o),n>o&&(n=o),t>=o||t>=n||0===o)return new ArrayBuffer(0);for(var i=new Uint8Array(e),r=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)r[a]=i[s];return r.buffer}},{}],8:[function(e,t,n){function o(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=o,o.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(e){this.ms=e},o.prototype.setMax=function(e){this.max=e},o.prototype.setJitter=function(e){this.jitter=e}},{}],9:[function(e,t,n){(function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),o=0;o<e.length;o++)t[e.charCodeAt(o)]=o;n.encode=function(t){var n,o=new Uint8Array(t),i=o.length,r="";for(n=0;n<i;n+=3)r+=e[o[n]>>2],r+=e[(3&o[n])<<4|o[n+1]>>4],r+=e[(15&o[n+1])<<2|o[n+2]>>6],r+=e[63&o[n+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},n.decode=function(e){var n,o,i,r,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var p=new ArrayBuffer(a),h=new Uint8Array(p);for(n=0;n<c;n+=4)o=t[e.charCodeAt(n)],i=t[e.charCodeAt(n+1)],r=t[e.charCodeAt(n+2)],s=t[e.charCodeAt(n+3)],h[l++]=o<<2|i>>4,h[l++]=(15&i)<<4|r>>2,h[l++]=(3&r)<<6|63&s;return p}})()},{}],10:[function(e,t,n){(function(e){var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=o&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),r=n&&n.prototype.append&&n.prototype.getBlob;function s(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var o=n.buffer;if(n.byteLength!==o.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(o,n.byteOffset,n.byteLength)),o=i.buffer}e[t]=o}}}function a(e,t){t=t||{};var o=new n;s(e);for(var i=0;i<e.length;i++)o.append(e[i]);return t.type?o.getBlob(t.type):o.getBlob()}function c(e,t){return s(e),new Blob(e,t||{})}t.exports=o?i?e.Blob:c:r?a:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{}],11:[function(e,t,n){var o=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=o.call(arguments,2);return function(){return t.apply(e,n.concat(o.call(arguments)))}}},{}],12:[function(e,t,n){function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}t.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<o.length;i++)if((n=o[i])===t||n.fn===t){o.splice(i,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var o=0,i=(n=n.slice(0)).length;o<i;++o)n[o].apply(this,t);return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],13:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],14:[function(e,t,n){function o(){var e;try{e=n.storage.debug}catch(e){}return e}(n=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var o="color: "+this.color,i=0,r=0;return(e=[e[0],o,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&"%c"===e&&(r=++i)}),e.splice(r,0,o),e},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=o,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(o())},{"./debug":15}],15:[function(e,t,n){(n=t.exports=function(e){function t(){}function r(){var e=r,t=+new Date,s=t-(o||t);e.diff=s,e.prev=o,e.curr=t,o=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=n.colors[i++%n.colors.length]);var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var c=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,o){if("%%"===t)return t;c++;var i=n.formatters[o];if("function"==typeof i){var r=a[c];t=i.call(e,r),a.splice(c,1),c--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var l=r.log||n.log||console.log.bind(console);l.apply(e,a)}t.enabled=!1,r.enabled=!0;var s=n.enabled(e)?r:t;return s.namespace=e,s}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),o=t.length,i=0;i<o;i++)t[i]&&("-"===(e=t[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,o;for(t=0,o=n.skips.length;t<o;t++)if(n.skips[t].test(e))return!1;for(t=0,o=n.names.length;t<o;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var o,i=0},{ms:35}],16:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":17}],17:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":18,"engine.io-parser":27}],18:[function(e,t,n){(function(n){var o=e("./transports"),r=e("component-emitter"),s=e("debug")("engine.io-client:socket"),a=e("indexof"),c=e("engine.io-parser"),l=e("parseuri"),p=e("parsejson"),h=e("parseqs");function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==(void 0===e?"undefined":i(e))&&(t=e,e=null),e?(e=l(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=l(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized;var o="object"==(void 0===n?"undefined":i(n))&&n;o.global===o&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}t.exports=u,u.priorWebsocketSuccess=!1,r(u.prototype),u.protocol=c.protocol,u.Socket=u,u.Transport=e("./transport"),u.transports=e("./transports"),u.parser=e("engine.io-parser"),u.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);return t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id),new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},u.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,o=this;function i(){if(o.onlyBinaryUpgrades){var i=!this.supportsBinary&&o.transport.supportsBinary;n=n||i}n||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!n)if("pong"==i.type&&"probe"==i.data){if(s('probe transport "%s" pong',e),o.upgrading=!0,o.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"==t.name,s('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){n||"closed"!=o.readyState&&(s("changing transport and sending upgrade packet"),h(),o.setTransport(t),t.send([{type:"upgrade"}]),o.emit("upgrade",t),t=null,o.upgrading=!1,o.flush())})}else{s('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=t.name,o.emit("upgradeError",r)}}))}function r(){n||(n=!0,h(),t.close(),t=null)}function a(n){var i=new Error("probe error: "+n);i.transport=t.name,r(),s('probe transport "%s" failed because of error: %s',e,n),o.emit("upgradeError",i)}function c(){a("transport closed")}function l(){a("socket closed")}function p(e){t&&e.name!=t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),r())}function h(){t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",c),o.removeListener("close",l),o.removeListener("upgrading",p)}u.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",a),t.once("close",c),this.once("close",l),this.once("upgrading",p),t.open()},u.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(p(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},u.prototype.sendPacket=function(e,t,n,o){if("function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}},u.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?o():t()}):this.upgrading?o():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function o(){e.once("upgrade",n),e.once("upgradeError",n)}return this},u.prototype.onError=function(e){s("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],n=0,o=e.length;n<o;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{"./transport":19,"./transports":20,"component-emitter":26,debug:14,"engine.io-parser":27,indexof:32,parsejson:36,parseqs:37,parseuri:38}],19:[function(e,t,n){var o=e("engine.io-parser"),i=e("component-emitter");function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}t.exports=r,i(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":26,"engine.io-parser":27}],20:[function(e,t,n){(function(t){var o=e("xmlhttprequest-ssl"),i=e("./polling-xhr"),r=e("./polling-jsonp"),s=e("./websocket");n.polling=function(e){var n=!1,s=!1,a=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,l=location.port;l||(l=c?443:80),n=e.hostname!=location.hostname||l!=e.port,s=e.secure!=c}if(e.xdomain=n,e.xscheme=s,"open"in new o(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new r(e)},n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{"./polling-jsonp":21,"./polling-xhr":22,"./websocket":24,"xmlhttprequest-ssl":25}],21:[function(e,t,n){(function(n){var o=e("./polling"),i=e("component-inherit");t.exports=l;var r,s=/\n/g,a=/\\n/g;function c(){}function l(e){o.call(this,e),this.query=this.query||{},r||(n.___eio||(n.___eio=[]),r=n.___eio),this.index=r.length;var t=this;r.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=c)},!1)}i(l,o),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var o,i=document.createElement("form"),r=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=c,i.method="POST",i.setAttribute("accept-charset","utf-8"),r.name="d",i.appendChild(r),document.body.appendChild(i),this.form=i,this.area=r}function l(){p(),t()}function p(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';o=document.createElement(e)}catch(e){(o=document.createElement("iframe")).name=n.iframeId,o.src="javascript:0"}o.id=n.iframeId,n.form.appendChild(o),n.iframe=o}this.form.action=this.uri(),p(),e=e.replace(a,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==n.iframe.readyState&&l()}:this.iframe.onload=l}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{"./polling":23,"component-inherit":13}],22:[function(e,t,n){(function(n){var o=e("xmlhttprequest-ssl"),i=e("./polling"),r=e("component-emitter"),s=e("component-inherit"),a=e("debug")("engine.io-client:polling-xhr");function c(){}function l(e){if(i.call(this,e),n.location){var t="https:"==location.protocol,o=location.port;o||(o=t?443:80),this.xd=e.hostname!=n.location.hostname||o!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function p(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function h(){for(var e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}t.exports=l,t.exports.Request=p,s(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new p(e)},l.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,o=this.request({method:"POST",data:e,isBinary:n}),i=this;o.on("success",t),o.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=o},l.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},r(p.prototype),p.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new o(e),i=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}n.document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},p.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},p.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}n.document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),o=[],i=0,r=n.length;i<r;i++)o.push(n[i]);e=String.fromCharCode.apply(null,o)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},p.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},n.document&&(p.requestsCount=0,p.requests={},n.attachEvent?n.attachEvent("onunload",h):n.addEventListener&&n.addEventListener("beforeunload",h,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{"./polling":23,"component-emitter":26,"component-inherit":13,debug:14,"xmlhttprequest-ssl":25}],23:[function(e,t,n){var o=e("../transport"),i=e("parseqs"),r=e("engine.io-parser"),s=e("component-inherit"),a=e("yeast"),c=e("debug")("engine.io-client:polling");t.exports=p;var l=null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function p(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),o.call(this,e)}s(p,o),p.prototype.name="polling",p.prototype.doOpen=function(){this.poll()},p.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(c("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){c("pre-pause polling complete"),--o||n()})),this.writable||(c("we are currently writing - waiting to pause"),o++,this.once("drain",function(){c("pre-pause writing complete"),--o||n()}))}else n()},p.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},p.prototype.onData=function(e){var t=this;c("polling got data %s",e);r.decodePayload(e,this.socket.binaryType,function(e,n,o){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},p.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"==this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},p.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};t=this;r.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,"xmlhttprequest-ssl":25,yeast:45}],24:[function(e,t,n){(function(n){var o=e("../transport"),i=e("engine.io-parser"),r=e("parseqs"),s=e("component-inherit"),a=e("yeast"),c=e("debug")("engine.io-client:websocket"),l=n.WebSocket||n.MozWebSocket,p=l;if(!p&&"undefined"==typeof window)try{p=e("ws")}catch(e){}function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,o.call(this,e)}t.exports=h,s(h,o),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=l?new p(e):new p(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(h.prototype.onData=function(e){var t=this;setTimeout(function(){o.prototype.onData.call(t,e)},0)}),h.prototype.write=function(e){var t=this;this.writable=!1;for(var o=e.length,r=0,s=o;r<s;r++)(function(e){i.encodePacket(e,t.supportsBinary,function(i){if(!l){var r={};if(e.options&&(r.compress=e.options.compress),t.perMessageDeflate)("string"==typeof i?n.Buffer.byteLength(i):i.length)<t.perMessageDeflate.threshold&&(r.compress=!1)}try{l?t.ws.send(i):t.ws.send(i,r)}catch(e){c("websocket closed before onclose event")}--o||a()})})(e[r]);function a(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}},h.prototype.onClose=function(){o.prototype.onClose.call(this)},h.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||(e.b64=1),(e=r.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},h.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===h.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,ws:void 0,yeast:45}],25:[function(e,t,n){var o=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":31}],26:[function(e,t,n){function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}t.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},o.prototype.once=function(e,t){var n=this;function o(){n.off(e,o),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},o.fn=t,this.on(e,o),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks[e];if(!o)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<o.length;i++)if((n=o[i])===t||n.fn===t){o.splice(i,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var o=0,i=(n=n.slice(0)).length;o<i;++o)n[o].apply(this,t);return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],27:[function(e,t,n){(function(t){var o=e("./keys"),i=e("has-binary"),r=e("arraybuffer.slice"),s=e("base64-arraybuffer"),a=e("after"),c=e("utf8"),l=navigator.userAgent.match(/Android/i),p=/PhantomJS/i.test(navigator.userAgent),h=l||p;n.protocol=3;var u=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=o(u),f={type:"error",data:"parser error"},g=e("blob");function y(e,t,n){for(var o=new Array(e.length),i=a(e.length,n),r=function(e,n,i){t(n,function(t,n){o[e]=n,i(t,o)})},s=0;s<e.length;s++)r(s,e[s],i)}n.encodePacket=function(e,o,i,r){"function"==typeof o&&(r=o,o=!1),"function"==typeof i&&(r=i,i=null);var s=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&s instanceof ArrayBuffer)return function(e,t,o){if(!t)return n.encodeBase64Packet(e,o);var i=e.data,r=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=u[e.type];for(var a=0;a<r.length;a++)s[a+1]=r[a];return o(s.buffer)}(e,o,r);if(g&&s instanceof t.Blob)return function(e,t,o){if(!t)return n.encodeBase64Packet(e,o);if(h)return function(e,t,o){if(!t)return n.encodeBase64Packet(e,o);var i=new FileReader;return i.onload=function(){e.data=i.result,n.encodePacket(e,t,!0,o)},i.readAsArrayBuffer(e.data)}(e,t,o);var i=new Uint8Array(1);i[0]=u[e.type];var r=new g([i.buffer,e.data]);return o(r)}(e,o,r);if(s&&s.base64)return function(e,t){var o="b"+n.packets[e.type]+e.data.data;return t(o)}(e,r);var a=u[e.type];return void 0!==e.data&&(a+=i?c.encode(String(e.data)):String(e.data)),r(""+a)},n.encodeBase64Packet=function(e,o){var i,r="b"+n.packets[e.type];if(g&&e.data instanceof t.Blob){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];o(r+e)},s.readAsDataURL(e.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),c=new Array(a.length),l=0;l<a.length;l++)c[l]=a[l];i=String.fromCharCode.apply(null,c)}return r+=t.btoa(i),o(r)},n.decodePacket=function(e,t,o){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(o)try{e=c.decode(e)}catch(e){return f}var i=e.charAt(0);return Number(i)==i&&d[i]?e.length>1?{type:d[i],data:e.substring(1)}:{type:d[i]}:f}i=new Uint8Array(e)[0];var s=r(e,1);return g&&"blob"===t&&(s=new g([s])),{type:d[i],data:s}},n.decodeBase64Packet=function(e,n){var o=d[e.charAt(0)];if(!t.ArrayBuffer)return{type:o,data:{base64:!0,data:e.substr(1)}};var i=s.decode(e.substr(1));return"blob"===n&&g&&(i=new g([i])),{type:o,data:i}},n.encodePayload=function(e,t,o){"function"==typeof t&&(o=t,t=null);var r=i(e);if(t&&r)return g&&!h?n.encodePayloadAsBlob(e,o):n.encodePayloadAsArrayBuffer(e,o);if(!e.length)return o("0:");y(e,function(e,o){n.encodePacket(e,!!r&&t,!0,function(e){o(null,function(e){return e.length+":"+e}(e))})},function(e,t){return o(t.join(""))})},n.decodePayload=function(e,t,o){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,o);var i;if("function"==typeof t&&(o=t,t=null),""==e)return o(f,0,1);for(var r,s,a="",c=0,l=e.length;c<l;c++){var p=e.charAt(c);if(":"!=p)a+=p;else{if(""==a||a!=(r=Number(a)))return o(f,0,1);if(a!=(s=e.substr(c+1,r)).length)return o(f,0,1);if(s.length){if(i=n.decodePacket(s,t,!0),f.type==i.type&&f.data==i.data)return o(f,0,1);if(!1===o(i,c+r,l))return}c+=r,a=""}}return""!=a?o(f,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));y(e,function(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,n){var o=n.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),i=new Uint8Array(o),r=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var o=new Uint8Array(e.length),s=0;s<e.length;s++)o[s]=e.charCodeAt(s);n=o.buffer}i[r++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)i[r++]=parseInt(a[s]);i[r++]=255;for(o=new Uint8Array(n),s=0;s<o.length;s++)i[r++]=o[s]}),t(i.buffer)})},n.encodePayloadAsBlob=function(e,t){y(e,function(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var o=new Uint8Array(e.length),i=0;i<e.length;i++)o[i]=e.charCodeAt(i);e=o.buffer,n[0]=0}var r=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(r.length+1);for(i=0;i<r.length;i++)s[i]=parseInt(r[i]);if(s[r.length]=255,g){var a=new g([n.buffer,s.buffer,e]);t(null,a)}})},function(e,n){return t(new g(n))})},n.decodePayloadAsBinary=function(e,t,o){"function"==typeof t&&(o=t,t=null);for(var i=e,s=[],a=!1;i.byteLength>0;){for(var c=new Uint8Array(i),l=0===c[0],p="",h=1;255!=c[h];h++){if(p.length>310){a=!0;break}p+=c[h]}if(a)return o(f,0,1);i=r(i,2+p.length),p=parseInt(p);var u=r(i,0,p);if(l)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(e){var d=new Uint8Array(u);u="";for(h=0;h<d.length;h++)u+=String.fromCharCode(d[h])}s.push(u),i=r(i,p)}var g=s.length;s.forEach(function(e,i){o(n.decodePacket(e,t,!0),i,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{"./keys":28,after:6,"arraybuffer.slice":7,"base64-arraybuffer":9,blob:10,"has-binary":29,utf8:44}],28:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var o in e)n.call(e,o)&&t.push(o);return t}},{}],29:[function(e,t,n){(function(n){var o=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(o(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==(void 0===t?"undefined":i(t)))for(var s in t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{isarray:33}],30:[function(e,t,n){(function(n){var o=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(o(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==(void 0===t?"undefined":i(t)))for(var s in t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{isarray:33}],31:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],32:[function(e,t,n){var o=[].indexOf;t.exports=function(e,t){if(o)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],33:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],34:[function(e,t,n){(function(e){(function(){var o={function:!0,object:!0},r=o[void 0===n?"undefined":i(n)]&&n&&!n.nodeType&&n,s=o["undefined"==typeof window?"undefined":i(window)]&&window||this,a=r&&o[void 0===t?"undefined":i(t)]&&t&&!t.nodeType&&"object"==(void 0===e?"undefined":i(e))&&e;function c(e,t){e||(e=s.Object()),t||(t=s.Object());var n=e.Number||s.Number,r=e.String||s.String,a=e.Object||s.Object,l=e.Date||s.Date,p=e.SyntaxError||s.SyntaxError,h=e.TypeError||s.TypeError,u=e.Math||s.Math,d=e.JSON||s.JSON;"object"==(void 0===d?"undefined":i(d))&&d&&(t.stringify=d.stringify,t.parse=d.parse);var f,g,y,_=a.prototype,v=_.toString,m=new l(-0xc782b5b800cec);try{m=-109252==m.getUTCFullYear()&&0===m.getUTCMonth()&&1===m.getUTCDate()&&10==m.getUTCHours()&&37==m.getUTCMinutes()&&6==m.getUTCSeconds()&&708==m.getUTCMilliseconds()}catch(e){}function b(e){if(b[e]!==y)return b[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=b("json-stringify")&&b("json-parse");else{var i,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=t.stringify,c="function"==typeof a&&m;if(c){(i=function(){return 1}).toJSON=i;try{c="0"===a(0)&&"0"===a(new n)&&'""'==a(new r)&&a(v)===y&&a(y)===y&&a()===y&&"1"===a(i)&&"[1]"==a([i])&&"[null]"==a([y])&&"null"==a(null)&&"[null,null,null]"==a([y,v,null])&&a({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===a(null,i)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new l(-1))}catch(e){c=!1}}o=c}if("json-parse"==e){var p=t.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){var h=5==(i=p(s)).a.length&&1===i.a[0];if(h){try{h=!p('"\t"')}catch(e){}if(h)try{h=1!==p("01")}catch(e){}if(h)try{h=1!==p("1.")}catch(e){}}}}catch(e){h=!1}o=h}}return b[e]=!!o}if(!b("json")){var k=b("bug-string-char-index");if(!m)var P=u.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(e,t){return w[t]+365*(e-1970)+P((e-1969+(t=+(t>1)))/4)-P((e-1901+t)/100)+P((e-1601+t)/400)};if((f=_.hasOwnProperty)||(f=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?f=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,f=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,f.call(this,e)}),g=function(e,t){var n,r,s,a=0;for(s in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)f.call(r,s)&&a++;return n=r=null,a?g=2==a?function(e,t){var n,o={},i="[object Function]"==v.call(e);for(n in e)i&&"prototype"==n||f.call(o,n)||!(o[n]=1)||!f.call(e,n)||t(n)}:function(e,t){var n,o,i="[object Function]"==v.call(e);for(n in e)i&&"prototype"==n||!f.call(e,n)||(o="constructor"===n)||t(n);(o||f.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,s,a="[object Function]"==v.call(e),c=!a&&"function"!=typeof e.constructor&&o[i(e.hasOwnProperty)]&&e.hasOwnProperty||f;for(n in e)a&&"prototype"==n||!c.call(e,n)||t(n);for(s=r.length;n=r[--s];c.call(e,n)&&t(n));}),g(e,t)},!b("json-stringify")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E=function(e,t){return("000000"+(t||0)).slice(-e)},S=function(e){for(var t='"',n=0,o=e.length,i=!k||o>10,r=i&&(k?e.split(""):e);n<o;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=C[s];break;default:if(s<32){t+="\\u00"+E(2,s.toString(16));break}t+=i?r[n]:e.charAt(n)}}return t+'"'};t.stringify=function(e,t,n){var r,s,a,c;if(o[void 0===t?"undefined":i(t)]&&t)if("[object Function]"==(c=v.call(t)))s=t;else if("[object Array]"==c){a={};for(var l,p=0,u=t.length;p<u;l=t[p++],("[object String]"==(c=v.call(l))||"[object Number]"==c)&&(a[l]=1));}if(n)if("[object Number]"==(c=v.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==c&&(r=n.length<=10?n:n.slice(0,10));return function e(t,n,o,r,s,a,c){var l,p,u,d,_,m,b,k,w,C,R,L,A,T,N,O;try{l=n[t]}catch(e){}if("object"==(void 0===l?"undefined":i(l))&&l)if("[object Date]"!=(p=v.call(l))||f.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=p&&"[object String]"!=p&&"[object Array]"!=p||f.call(l,"toJSON"))&&(l=l.toJSON(t));else if(l>-1/0&&l<1/0){if(D){for(_=P(l/864e5),u=P(_/365.2425)+1970-1;D(u+1,0)<=_;u++);for(d=P((_-D(u,0))/30.42);D(u,d+1)<=_;d++);_=1+_-D(u,d),b=P((m=(l%864e5+864e5)%864e5)/36e5)%24,k=P(m/6e4)%60,w=P(m/1e3)%60,C=m%1e3}else u=l.getUTCFullYear(),d=l.getUTCMonth(),_=l.getUTCDate(),b=l.getUTCHours(),k=l.getUTCMinutes(),w=l.getUTCSeconds(),C=l.getUTCMilliseconds();l=(u<=0||u>=1e4?(u<0?"-":"+")+E(6,u<0?-u:u):E(4,u))+"-"+E(2,d+1)+"-"+E(2,_)+"T"+E(2,b)+":"+E(2,k)+":"+E(2,w)+"."+E(3,C)+"Z"}else l=null;if(o&&(l=o.call(n,t,l)),null===l)return"null";if("[object Boolean]"==(p=v.call(l)))return""+l;if("[object Number]"==p)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==p)return S(""+l);if("object"==(void 0===l?"undefined":i(l))){for(T=c.length;T--;)if(c[T]===l)throw h();if(c.push(l),R=[],N=a,a+=s,"[object Array]"==p){for(A=0,T=l.length;A<T;A++)L=e(A,l,o,r,s,a,c),R.push(L===y?"null":L);O=R.length?s?"[\n"+a+R.join(",\n"+a)+"\n"+N+"]":"["+R.join(",")+"]":"[]"}else g(r||l,function(t){var n=e(t,l,o,r,s,a,c);n!==y&&R.push(S(t)+":"+(s?" ":"")+n)}),O=R.length?s?"{\n"+a+R.join(",\n"+a)+"\n"+N+"}":"{"+R.join(",")+"}":"{}";return c.pop(),O}}("",((l={})[""]=e,l),s,a,r,"",[])}}if(!b("json-parse")){var R,L,A=r.fromCharCode,T={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},N=function(){throw R=L=null,p()},O=function(){for(var e,t,n,o,i,r=L,s=r.length;R<s;)switch(i=r.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=k?r.charAt(R):r[R],R++,e;case 34:for(e="@",R++;R<s;)if((i=r.charCodeAt(R))<32)N();else if(92==i)switch(i=r.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=T[i],R++;break;case 117:for(t=++R,n=R+4;R<n;R++)(i=r.charCodeAt(R))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||N();e+=A("0x"+r.slice(t,R));break;default:N()}else{if(34==i)break;for(i=r.charCodeAt(R),t=R;i>=32&&92!=i&&34!=i;)i=r.charCodeAt(++R);e+=r.slice(t,R)}if(34==r.charCodeAt(R))return R++,e;N();default:if(t=R,45==i&&(o=!0,i=r.charCodeAt(++R)),i>=48&&i<=57){for(48==i&&((i=r.charCodeAt(R+1))>=48&&i<=57)&&N(),o=!1;R<s&&((i=r.charCodeAt(R))>=48&&i<=57);R++);if(46==r.charCodeAt(R)){for(n=++R;n<s&&((i=r.charCodeAt(n))>=48&&i<=57);n++);n==R&&N(),R=n}if(101==(i=r.charCodeAt(R))||69==i){for(43!=(i=r.charCodeAt(++R))&&45!=i||R++,n=R;n<s&&((i=r.charCodeAt(n))>=48&&i<=57);n++);n==R&&N(),R=n}return+r.slice(t,R)}if(o&&N(),"true"==r.slice(R,R+4))return R+=4,!0;if("false"==r.slice(R,R+5))return R+=5,!1;if("null"==r.slice(R,R+4))return R+=4,null;N()}return"$"},M=function(e,t,n){var o=I(e,t,n);o===y?delete e[t]:e[t]=o},I=function(e,t,n){var o,r=e[t];if("object"==(void 0===r?"undefined":i(r))&&r)if("[object Array]"==v.call(r))for(o=r.length;o--;)M(r,o,n);else g(r,function(e){M(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,o;return R=0,L=""+e,n=function e(t){var n,o;if("$"==t&&N(),"string"==typeof t){if("@"==(k?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=O());o||(o=!0))o&&(","==t?"]"==(t=O())&&N():N()),","==t&&N(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=O());o||(o=!0))o&&(","==t?"}"==(t=O())&&N():N()),","!=t&&"string"==typeof t&&"@"==(k?t.charAt(0):t[0])&&":"==O()||N(),n[t.slice(1)]=e(O());return n}N()}return t}(O()),"$"!=O()&&N(),R=L=null,t&&"[object Function]"==v.call(t)?I(((o={})[""]=n,o),"",t):n}}}return t.runInContext=c,t}if(!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a),r)c(s,r);else{var l=s.JSON,p=s.JSON3,h=!1,u=c(s,s.JSON3={noConflict:function(){return h||(h=!0,s.JSON=l,s.JSON3=p,l=p=null),u}});s.JSON={parse:u.parse,stringify:u.stringify}}}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{}],35:[function(e,t,n){var o=1e3,i=60*o,r=60*i,s=24*r,a=365.25*s;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if((e=""+e).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(e):t.long?function(e){return c(e,s,"day")||c(e,r,"hour")||c(e,i,"minute")||c(e,o,"second")||e+" ms"}(e):function(e){return e>=s?Math.round(e/s)+"d":e>=r?Math.round(e/r)+"h":e>=i?Math.round(e/i)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}(e)}},{}],36:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(o,"@").replace(i,"]").replace(r,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{}],37:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),o=0,i=n.length;o<i;o++){var r=n[o].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},{}],38:[function(e,t,n){var o=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var s=o.exec(e||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],39:[function(e,t,n){(function(t){var o=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){var t=[],n=e.data;var s=e;return s.data=function e(n){if(!n)return n;if(r(n)){var s={_placeholder:!0,num:t.length};return t.push(n),s}if(o(n)){for(var a=new Array(n.length),c=0;c<n.length;c++)a[c]=e(n[c]);return a}if("object"==(void 0===n?"undefined":i(n))&&!(n instanceof Date)){for(var l in a={},n)a[l]=e(n[l]);return a}return n}(n),s.attachments=t.length,{packet:s,buffers:t}},n.reconstructPacket=function(e,t){return e.data=function e(n){if(n&&n._placeholder)return t[n.num];if(o(n)){for(var r=0;r<n.length;r++)n[r]=e(n[r]);return n}if(n&&"object"==(void 0===n?"undefined":i(n))){for(var s in n)n[s]=e(n[s]);return n}return n}(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){var s=0,a=e;(function e(c,l,p){if(!c)return c;if(t.Blob&&c instanceof Blob||t.File&&c instanceof File){s++;var h=new FileReader;h.onload=function(){p?p[l]=this.result:a=this.result,--s||n(a)},h.readAsArrayBuffer(c)}else if(o(c))for(var u=0;u<c.length;u++)e(c[u],u,c);else if(c&&"object"==(void 0===c?"undefined":i(c))&&!r(c))for(var d in c)e(c[d],d,c)})(a),s||n(a)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{"./is-buffer":41,isarray:33}],40:[function(e,t,n){var o=e("debug")("socket.io-parser"),i=e("json3"),r=(e("isarray"),e("component-emitter")),s=e("./binary"),a=e("./is-buffer");function c(){}function l(e){var t="",r=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,t+=e.nsp),null!=e.id&&(r&&(t+=",",r=!1),t+=e.id),null!=e.data&&(r&&(t+=","),t+=i.stringify(e.data)),o("encoded %j as %s",e,t),t}function p(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:n.ERROR,data:"parser error"}}n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=c,n.Decoder=p,c.prototype.encode=function(e,t){(o("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)?function(e,t){s.removeBlobs(e,function(e){var n=s.deconstructPacket(e),o=l(n.packet),i=n.buffers;i.unshift(o),t(i)})}(e,t):t([l(e)])},r(p.prototype),p.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t={},r=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return u();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var s="";"-"!=e.charAt(++r)&&(s+=e.charAt(r),r!=e.length););if(s!=Number(s)||"-"!=e.charAt(r))throw new Error("Illegal attachments");t.attachments=Number(s)}if("/"==e.charAt(r+1))for(t.nsp="";++r;){var a=e.charAt(r);if(","==a)break;if(t.nsp+=a,r==e.length)break}else t.nsp="/";var c=e.charAt(r+1);if(""!==c&&Number(c)==c){for(t.id="";++r;){var a=e.charAt(r);if(null==a||Number(a)!=a){--r;break}if(t.id+=e.charAt(r),r==e.length)break}t.id=Number(t.id)}if(e.charAt(++r))try{t.data=i.parse(e.substr(r))}catch(e){return u()}return o("decoded %s as %j",e,t),t}(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new h(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":42,debug:14,isarray:33,json3:34}],41:[function(e,t,n){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{}],42:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],43:[function(e,t,n){t.exports=function(e,t){for(var n=[],o=(t=t||0)||0;o<e.length;o++)n[o-t]=e[o];return n}},{}],44:[function(e,t,n){(function(e){(function(o){var r="object"==(void 0===n?"undefined":i(n))&&n,s="object"==(void 0===t?"undefined":i(t))&&t&&t.exports==r&&t,a="object"==(void 0===e?"undefined":i(e))&&e;a.global!==a&&a.window!==a||(o=a);var c,l,p,h=String.fromCharCode;function u(e){for(var t,n,o=[],i=0,r=e.length;i<r;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<r?56320==(64512&(n=e.charCodeAt(i++)))?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),i--):o.push(t);return o}function d(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function f(e,t){return h(e>>t&63|128)}function g(e){if(0==(4294967168&e))return h(e);var t="";return 0==(4294965248&e)?t=h(e>>6&31|192):0==(4294901760&e)?(d(e),t=h(e>>12&15|224),t+=f(e,6)):0==(4292870144&e)&&(t=h(e>>18&7|240),t+=f(e,12),t+=f(e,6)),t+=h(63&e|128)}function y(){if(p>=l)throw Error("Invalid byte index");var e=255&c[p];if(p++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function _(){var e,t;if(p>l)throw Error("Invalid byte index");if(p==l)return!1;if(e=255&c[p],p++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|y())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|y()<<6|y())>=2048)return d(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|y()<<12|y()<<6|y())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var v={version:"2.0.0",encode:function(e){for(var t=u(e),n=t.length,o=-1,i="";++o<n;)i+=g(t[o]);return i},decode:function(e){c=u(e),l=c.length,p=0;for(var t,n=[];!1!==(t=_());)n.push(t);return function(e){for(var t,n=e.length,o=-1,i="";++o<n;)(t=e[o])>65535&&(i+=h((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=h(t);return i}(n)}};if(r&&!r.nodeType)if(s)s.exports=v;else{var m={}.hasOwnProperty;for(var b in v)m.call(v,b)&&(r[b]=v[b])}else o.utf8=v})(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:{})},{}],45:[function(e,t,n){var o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,s={},a=0,c=0;function l(e){var t="";do{t=i[e%r]+t,e=Math.floor(e/r)}while(e>0);return t}function p(){var e=l(+new Date);return e!==o?(a=0,o=e):e+"."+l(a++)}for(;c<r;c++)s[i[c]]=c;p.encode=l,p.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*r+s[e.charAt(c)];return t},t.exports=p},{}]},{},[1])(1)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],tableSelection:[function(e,t,n){"use strict";cc._RF.push(t,"0dae3zCxnpLRKxK/ot4BLfC","tableSelection"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableId=null,t}return __extends(t,e),t.prototype.entertable=function(){var e=parseInt(this.tableId.string);e>1&&e<100?cc.find("Canvas/Home").getComponent("Home").enterTable(parseInt(this.tableId.string)):console.log("\u684c\u5b50\u4e0d\u5b58\u5728!")},t.prototype.onLoad=function(){this.tableId.string=" "},t.prototype.start=function(){},t.prototype.one=function(){this.tableId.string.length<3&&(this.tableId.string+=1)},t.prototype.two=function(){this.tableId.string.length<3&&(this.tableId.string+=2)},t.prototype.three=function(){this.tableId.string.length<3&&(this.tableId.string+=3)},t.prototype.four=function(){this.tableId.string.length<3&&(this.tableId.string+=4)},t.prototype.five=function(){this.tableId.string.length<3&&(this.tableId.string+=5)},t.prototype.six=function(){this.tableId.string.length<3&&(this.tableId.string+=6)},t.prototype.seven=function(){this.tableId.string.length<3&&(this.tableId.string+=7)},t.prototype.eight=function(){this.tableId.string.length<3&&(this.tableId.string+=8)},t.prototype.nine=function(){this.tableId.string.length<3&&(this.tableId.string+=9)},t.prototype.zero=function(){this.tableId.string.length<3&&(this.tableId.string+=0)},t.prototype.retype=function(){this.tableId.string=""},t.prototype.delete=function(){this.tableId.string=this.tableId.string.substring(-1,this.tableId.string.length-1)},t.prototype.onEnable=function(){this.tableId.string=""},__decorate([r(cc.Label)],t.prototype,"tableId",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],timer_panel:[function(e,t,n){"use strict";cc._RF.push(t,"1f5beO9KJBJYb7pzO1tLQg+","timer_panel"),cc.Class({extends:cc.Component,properties:{panel:{default:[],type:cc.Node}},init:function(){this.panel[0]=cc.find("Canvas/timerPanel/leftPanel/clock"),this.panel[1]=cc.find("Canvas/timerPanel/rightPanel/clock")},onLoad:function(){this.init()},showLeftTimer:function(){this.panel[0].active=!0},hideLeftTimer:function(){this.panel[0].active=!1},showRightTimer:function(){this.panel[1].active=!0,console.log("show right clock")},hideRightTimer:function(){this.panel[1].active=!1},hideAllTimer:function(){this.panel[0].active=!1,this.panel[1].active=!1},start:function(){}}),cc._RF.pop()},{}],util:[function(e,t,n){"use strict";cc._RF.push(t,"1ca63TsA+NDEaw+dVeLt/RP","util");var o={EXCEPTION:{WRONG_POKER_TYPE:"\u9519\u8bef\u724c\u578b",NOT_SAME_TYPE:"\u724c\u578b\u4e0d\u4e00\u81f4"},pokerType:{a:"dan",b:"dui",c:"san",d:"zhadan",da:"si",db:"si",dc:"si",aaaaa:"shunzi",bbb:"liandui",ca:"sandaiyi",cb:"sandaiyi",cc:"feiji",ccaa:"feiji",ccbb:"feiji",ccc:"feiji",cccaaa:"feiji",cccbbb:"feiji",cccc:"feiji",ccccaaaa:"feiji",ccccbbbb:"feiji",ccccc:"feiji",cccccaaaa:"feiji",cccccc:"feiji"},pokerGrade:{3:1,4:2,5:3,6:4,7:5,8:6,9:7,10:8,J:9,Q:10,K:11,A:12,2:13,g:14,G:15},rnd:function(e,t){return Math.floor(Math.random()*(e-t+1)+e)},gradeDown:function(e,t){return(15&t)-(15&e)},gradeUp:function(e,t){return(15&t)-(15&e)},isRightOrder:function(e){console.log(e);for(var t=0;t<e.length-1;t++)if(parseInt(e[t+1])-parseInt(e[t])!=1)return!1;return!0}};t.exports=o,cc._RF.pop()},{}],zoumadeng:[function(e,t,n){"use strict";cc._RF.push(t,"4d570HQyONFpo1It1ZEz6dt","zoumadeng"),cc.Class({extends:cc.Component,properties:{_WIDTH:{default:0},_SPEED:{default:.03,type:cc.Float},unusedLabelPool:{default:[]},usedLabelPool:{default:[]},currentLabelPool:{default:[]},noticePool:{default:[]},massageLabel:{default:null,type:cc.Node}},onLoad:function(){this.unusedLabelPool=[],this.usedLabelPool=[],this.currentLabelPool=[],this._WIDTH=600;var e=this;window.testPushNotice=function(t){e._pushNotice(t)},window.testtest=function(){e._test()},this.startAni("cadasd")},startAni:function(e){var t=this.massageLabel,n=5,o=t.x,i=t.y;t.width>500&&(n=t.width/100);var r=cc.delayTime(.01),s=cc.moveBy(n,cc.v2(-1140,0)),a=cc.callFunc(function(){t.setPosition(cc.v2(o,i))}),c=cc.sequence(r,s,a).repeatForever();t.runAction(c)},_test:function(){for(var e=0;e<10;e++){var t="<color=#00ff00>love</color><color=#ff0000> cocos"+e+"---</color>";this._pushNotice(t)}},start:function(){},_getOneLabel:function(){if(this.unusedLabelPool.length>0)n=this.unusedLabelPool.pop();else{var e=this.unusedLabelPool.length+this.usedLabelPool.length,t=new cc.Node("zoumading"+e),n=t.addComponent(cc.RichText);this.node.addChild(t)}return this.usedLabelPool.push(n),n},_releaseOneLabel:function(e){var t=this.usedLabelPool.indexOf(e);-1!=t&&(this.usedLabelPool.splice(t,1),this.unusedLabelPool.push(e),e.node.visible=!1)},_pushNotice:function(e){this.noticePool.push(e)},_getNotice:function(){return this.noticePool.pop()},update:function(e){}}),cc._RF.pop()},{}]},{},["_init","config","event_type","eventdispatcher","player","protocol","socket.io","util","call_landlord","clock","clock1","control_panel","end_dialog","face_node","facecontroller","handedout_poker_panel","passTag","poker_panel","prepare","timer_panel","zoumadeng","poker","poker_handler","poker_type_handler","Game","Home","Login","HallMenu","mail","settings","tableSelection"]);